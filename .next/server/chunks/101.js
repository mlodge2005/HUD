exports.id=101,exports.ids=[101],exports.modules={9552:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3219,23)),Promise.resolve().then(r.t.bind(r,4863,23)),Promise.resolve().then(r.t.bind(r,5155,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,6313,23)),Promise.resolve().then(r.t.bind(r,8530,23)),Promise.resolve().then(r.t.bind(r,8921,23))},4400:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6959,23)),Promise.resolve().then(r.t.bind(r,3875,23)),Promise.resolve().then(r.t.bind(r,8903,23)),Promise.resolve().then(r.t.bind(r,4178,23)),Promise.resolve().then(r.t.bind(r,6013,23)),Promise.resolve().then(r.t.bind(r,7190,23)),Promise.resolve().then(r.t.bind(r,1365,23))},469:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,5197,23))},8677:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,7801,23))},6402:()=>{},906:()=>{},308:(e,t,r)=>{"use strict";r.d(t,{default:()=>i.a});var n=r(5197),i=r.n(n)},1831:(e,t,r)=>{"use strict";var n=r(7359);r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}})},1271:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return o}});let n=r(6893),i=r(6552);function o(e){return(0,i.isRedirectError)(e)||(0,n.isNotFoundError)(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return a},RedirectType:function(){return n.RedirectType},notFound:function(){return i.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect},unstable_rethrow:function(){return o.unstable_rethrow}});let n=r(6552),i=r(6893),o=r(1370);class s extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class a extends URLSearchParams{append(){throw new s}delete(){throw new s}set(){throw new s}sort(){throw new s}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1541:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6552:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return n},getRedirectError:function(){return a},getRedirectStatusCodeFromError:function(){return p},getRedirectTypeFromError:function(){return f},getURLFromRedirectError:function(){return c},isRedirectError:function(){return l},permanentRedirect:function(){return d},redirect:function(){return u}});let i=r(9121),o=r(1541),s="NEXT_REDIRECT";function a(e,t,r){void 0===r&&(r=o.RedirectStatusCode.TemporaryRedirect);let n=Error(s);return n.digest=s+";"+t+";"+e+";"+r+";",n}function u(e,t){let r=i.actionAsyncStorage.getStore();throw a(e,t||((null==r?void 0:r.isAction)?"push":"replace"),o.RedirectStatusCode.TemporaryRedirect)}function d(e,t){throw void 0===t&&(t="replace"),a(e,t,o.RedirectStatusCode.PermanentRedirect)}function l(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,n]=t,i=t.slice(2,-2).join(";"),a=Number(t.at(-2));return r===s&&("replace"===n||"push"===n)&&"string"==typeof i&&!isNaN(a)&&a in o.RedirectStatusCode}function c(e){return l(e)?e.digest.split(";").slice(2,-2).join(";"):null}function f(e){if(!l(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function p(e){if(!l(e))throw Error("Not a redirect error");return Number(e.digest.split(";").at(-2))}(function(e){e.push="push",e.replace="replace"})(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1370:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,s.isNextRouterError)(t)||(0,o.isBailoutToCSRError)(t)||(0,n.isDynamicUsageError)(t)||(0,i.isPostpone)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let n=r(2349),i=r(7418),o=r(627),s=r(1271);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5197:(e,t,r)=>{let{createProxy:n}=r(3439);e.exports=n("C:\\Users\\mlodg\\Downloads\\HUD\\hud-webapp\\node_modules\\next\\dist\\client\\link.js")},2349:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicUsageError",{enumerable:!0,get:function(){return a}});let n=r(2490),i=r(627),o=r(1271),s=r(436),a=e=>(0,n.isDynamicServerError)(e)||(0,i.isBailoutToCSRError)(e)||(0,o.isNextRouterError)(e)||(0,s.isDynamicPostpone)(e)},7418:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPostpone",{enumerable:!0,get:function(){return n}});let r=Symbol.for("react.postpone");function n(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}},627:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return n},isBailoutToCSRError:function(){return i}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class n extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}},6038:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(2740),i=r(1831),o=r(308),s=r(7702);async function a({children:e}){let t=await (0,s.Hx)();return t||(0,i.redirect)("/login?from=/admin"),t.mustChangePassword&&(0,i.redirect)("/change-password?from=/admin"),"admin"!==t.role&&(0,i.redirect)("/hud"),(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsxs)("nav",{className:"bg-white border-b px-4 py-2 flex gap-4 items-center",children:[(0,n.jsx)(o.default,{href:"/admin",className:"font-medium",children:"Users"}),(0,n.jsx)(o.default,{href:"/admin/auth-events",className:"text-gray-600 hover:text-gray-900",children:"Login history"}),(0,n.jsx)(o.default,{href:"/hud",className:"text-gray-600 hover:text-gray-900",children:"HUD"}),(0,n.jsx)("span",{className:"ml-auto text-sm text-gray-500",children:t.displayName})]}),e]})}},1354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>i});var n=r(2740);r(1135);let i={title:"HUD WebApp",description:"Streamer/Viewer HUD with Admin"};function o({children:e}){return(0,n.jsx)("html",{lang:"en",children:(0,n.jsx)("body",{className:"antialiased",children:e})})}},7702:(e,t,r)=>{"use strict";r.d(t,{Hx:()=>a,ZT:()=>s,oC:()=>o});var n=r(6702),i=r(7914);async function o(){let e=await (0,n.Nx)();if(!e)throw new u("Unauthorized",401);let t=await i.z.user.findUnique({where:{id:e.userId}});if(!t||t.disabled)throw new u("Unauthorized",401);return{id:t.id,username:t.username,displayName:t.displayName,role:t.role,mustChangePassword:t.mustChangePassword}}async function s(){let e=await o();if("admin"!==e.role)throw new u("Forbidden",403);return e}async function a(){try{return await o()}catch{return null}}class u extends Error{constructor(e,t=401){super(e),this.statusCode=t,this.name="AuthError"}}},7914:(e,t,r)=>{"use strict";r.d(t,{z:()=>i});var n=r(6330);let i=globalThis.prisma??new n.PrismaClient},6702:(e,t,r)=>{"use strict";r.d(t,{$G:()=>c,C0:()=>f,Nx:()=>l,T$:()=>p,V_:()=>h,jw:()=>d});var n=r(4512),i=r(5511),o=r(7914),s=r(5378);let a="hud_session";function u(e){return(0,i.createHash)("sha256").update(e).digest("hex")}async function d(e){let t=(0,s.Ak)(32),r=u(t),n=new Date(Date.now()+6048e5);return await o.z.session.create({data:{userId:e,tokenHash:r,expiresAt:n}}),t}async function l(){let e=(await (0,n.UL)()).get(a);if(!e?.value)return null;let t=u(e.value),r=await o.z.session.findUnique({where:{tokenHash:t},include:{user:!0}});return!r||r.expiresAt<new Date||r.user.disabled?(r&&await o.z.session.delete({where:{id:r.id}}).catch(()=>{}),null):(await o.z.session.update({where:{id:r.id},data:{lastSeenAt:new Date}}),{userId:r.userId,sessionId:r.id})}async function c(e){(await (0,n.UL)()).set(a,e,{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:604800,path:"/"})}async function f(){(await (0,n.UL)()).delete(a)}async function p(e){await o.z.session.delete({where:{id:e}}).catch(()=>{})}async function h(e){await o.z.session.deleteMany({where:{userId:e}})}},1135:()=>{}};