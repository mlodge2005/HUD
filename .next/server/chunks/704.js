"use strict";exports.id=704,exports.ids=[704],exports.modules={5704:(e,n,t)=>{function a(e,n){if(!e)throw Error(n)}function r(e){if("number"!=typeof e)throw Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>0x7fffffff||e<-0x80000000)throw Error("invalid int 32: "+e)}function i(e){if("number"!=typeof e)throw Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>0xffffffff||e<0)throw Error("invalid uint 32: "+e)}function s(e){if("number"!=typeof e)throw Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw Error("invalid float 32: "+e)}t.d(n,{mk:()=>tH});let o=Symbol("@bufbuild/protobuf/enum-type");function m(e,n,t,a){e[o]=l(n,t.map(n=>({no:n.no,name:n.name,localName:e[n.no]})),a)}function l(e,n,t){let a=Object.create(null),r=Object.create(null),i=[];for(let e of n){let n=d(e);i.push(n),a[e.name]=n,r[e.no]=n}return{typeName:e,values:i,findName:e=>a[e],findNumber:e=>r[e]}}function d(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class c{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){let t=this.getType().runtime.bin,a=t.makeReadOptions(n);return t.readMessage(this,a.readerFactory(e),e.byteLength,a),this}fromJson(e,n){let t=this.getType(),a=t.runtime.json,r=a.makeReadOptions(n);return a.readMessage(t,e,r,this),this}fromJsonString(e,n){let t;try{t=JSON.parse(e)}catch(e){throw Error(`cannot decode ${this.getType().typeName} from JSON: ${e instanceof Error?e.message:String(e)}`)}return this.fromJson(t,n)}toBinary(e){let n=this.getType().runtime.bin,t=n.makeWriteOptions(e),a=t.writerFactory();return n.writeMessage(this,a,t),a.finish()}toJson(e){let n=this.getType().runtime.json,t=n.makeWriteOptions(e);return n.writeMessage(this,t)}toJsonString(e){var n;return JSON.stringify(this.toJson(e),null,null!==(n=null==e?void 0:e.prettySpaces)&&void 0!==n?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function u(){let e=0,n=0;for(let t=0;t<28;t+=7){let a=this.buf[this.pos++];if(e|=(127&a)<<t,(128&a)==0)return this.assertBounds(),[e,n]}let t=this.buf[this.pos++];if(e|=(15&t)<<28,n=(112&t)>>4,(128&t)==0)return this.assertBounds(),[e,n];for(let t=3;t<=31;t+=7){let a=this.buf[this.pos++];if(n|=(127&a)<<t,(128&a)==0)return this.assertBounds(),[e,n]}throw Error("invalid varint")}function p(e,n,t){for(let a=0;a<28;a+=7){let r=e>>>a,i=!(r>>>7==0&&0==n),s=(i?128|r:r)&255;if(t.push(s),!i)return}let a=e>>>28&15|(7&n)<<4,r=n>>3!=0;if(t.push((r?128|a:a)&255),r){for(let e=3;e<31;e+=7){let a=n>>>e,r=a>>>7!=0,i=(r?128|a:a)&255;if(t.push(i),!r)return}t.push(n>>>31&1)}}function f(e){let n="-"===e[0];n&&(e=e.slice(1));let t=0,a=0;function r(n,r){let i=Number(e.slice(n,r));a*=1e6,(t=1e6*t+i)>=0x100000000&&(a+=t/0x100000000|0,t%=0x100000000)}return r(-24,-18),r(-18,-12),r(-12,-6),r(-6),n?h(t,a):k(t,a)}function T(e,n){if({lo:e,hi:n}={lo:e>>>0,hi:n>>>0},n<=2097151)return String(0x100000000*n+e);let t=0xffffff&e,a=(e>>>24|n<<8)&0xffffff,r=n>>16&65535,i=t+6777216*a+6710656*r,s=a+8147497*r,o=2*r;return i>=1e7&&(s+=Math.floor(i/1e7),i%=1e7),s>=1e7&&(o+=Math.floor(s/1e7),s%=1e7),o.toString()+g(s)+g(i)}function k(e,n){return{lo:0|e,hi:0|n}}function h(e,n){return n=~n,e?e=~e+1:n+=1,k(e,n)}let g=e=>{let n=String(e);return"0000000".slice(n.length)+n};function y(e,n){if(e>=0){for(;e>127;)n.push(127&e|128),e>>>=7;n.push(e)}else{for(let t=0;t<9;t++)n.push(127&e|128),e>>=7;n.push(1)}}function _(){let e=this.buf[this.pos++],n=127&e;if((128&e)==0||(n|=(127&(e=this.buf[this.pos++]))<<7,(128&e)==0)||(n|=(127&(e=this.buf[this.pos++]))<<14,(128&e)==0)||(n|=(127&(e=this.buf[this.pos++]))<<21,(128&e)==0))return this.assertBounds(),n;n|=(15&(e=this.buf[this.pos++]))<<28;for(let n=5;(128&e)!=0&&n<10;n++)e=this.buf[this.pos++];if((128&e)!=0)throw Error("invalid varint");return this.assertBounds(),n>>>0}let E=function(){let e=new DataView(new ArrayBuffer(8));if("function"==typeof BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&("object"!=typeof process||"object"!=typeof process.env||"1"!==process.env.BUF_BIGINT_DISABLE)){let n=BigInt("-9223372036854775808"),t=BigInt("9223372036854775807"),a=BigInt("0"),r=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){let a="bigint"==typeof e?e:BigInt(e);if(a>t||a<n)throw Error(`int64 invalid: ${e}`);return a},uParse(e){let n="bigint"==typeof e?e:BigInt(e);if(n>r||n<a)throw Error(`uint64 invalid: ${e}`);return n},enc(n){return e.setBigInt64(0,this.parse(n),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(n){return e.setBigInt64(0,this.uParse(n),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(n,t)=>(e.setInt32(0,n,!0),e.setInt32(4,t,!0),e.getBigInt64(0,!0)),uDec:(n,t)=>(e.setInt32(0,n,!0),e.setInt32(4,t,!0),e.getBigUint64(0,!0))}}let n=e=>a(/^-?[0-9]+$/.test(e),`int64 invalid: ${e}`),t=e=>a(/^[0-9]+$/.test(e),`uint64 invalid: ${e}`);return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),n(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),t(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),n(e),f(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),t(e),f(e)),dec:(e,n)=>(function(e,n){let t=k(e,n),a=0x80000000&t.hi;a&&(t=h(t.lo,t.hi));let r=T(t.lo,t.hi);return a?"-"+r:r})(e,n),uDec:(e,n)=>T(e,n)}}();function b(e,n,t){if(n===t)return!0;if(e==nZ.BYTES){if(!(n instanceof Uint8Array)||!(t instanceof Uint8Array)||n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}switch(e){case nZ.UINT64:case nZ.FIXED64:case nZ.INT64:case nZ.SFIXED64:case nZ.SINT64:return n==t}return!1}function S(e,n){switch(e){case nZ.BOOL:return!1;case nZ.UINT64:case nZ.FIXED64:case nZ.INT64:case nZ.SFIXED64:case nZ.SINT64:return 0==n?E.zero:"0";case nZ.DOUBLE:case nZ.FLOAT:return 0;case nZ.BYTES:return new Uint8Array(0);case nZ.STRING:return"";default:return 0}}function I(e,n){switch(e){case nZ.BOOL:return!1===n;case nZ.STRING:return""===n;case nZ.BYTES:return n instanceof Uint8Array&&!n.byteLength;default:return 0==n}}function N(e){let n=e.field.localName,t=Object.create(null);return t[n]=function(e){let n=e.field;if(n.repeated)return[];if(void 0!==n.default)return n.default;switch(n.kind){case"enum":return n.T.values[0].no;case"scalar":return S(n.T,n.L);case"message":let t=n.T,a=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(a):a;case"map":throw"map fields are not allowed to be extensions"}}(e),[t,()=>t[n]]}(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(nZ||(nZ={})),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"}(nQ||(nQ={}));let w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),v=[];for(let e=0;e<w.length;e++)v[w[e].charCodeAt(0)]=e;v["-".charCodeAt(0)]=w.indexOf("+"),v["_".charCodeAt(0)]=w.indexOf("/");let O={dec(e){let n=3*e.length/4;"="==e[e.length-2]?n-=2:"="==e[e.length-1]&&(n-=1);let t=new Uint8Array(n),a=0,r=0,i,s=0;for(let n=0;n<e.length;n++){if(void 0===(i=v[e.charCodeAt(n)]))switch(e[n]){case"=":r=0;case"\n":case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:s=i,r=1;break;case 1:t[a++]=s<<2|(48&i)>>4,s=i,r=2;break;case 2:t[a++]=(15&s)<<4|(60&i)>>2,s=i,r=3;break;case 3:t[a++]=(3&s)<<6|i,r=0}}if(1==r)throw Error("invalid base64 string.");return t.subarray(0,a)},enc(e){let n="",t=0,a,r=0;for(let i=0;i<e.length;i++)switch(a=e[i],t){case 0:n+=w[a>>2],r=(3&a)<<4,t=1;break;case 1:n+=w[r|a>>4],r=(15&a)<<2,t=2;break;case 2:n+=w[r|a>>6],n+=w[63&a],t=0}return t&&(n+=w[r],n+="=",1==t&&(n+="=")),n}};function A(e,n){let t=e.getType();return n.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(e).find(e=>e.no==n.field.no)}function R(e,n){a(e.extendee.typeName==n.getType().typeName,`extension ${e.typeName} can only be applied to message ${e.extendee.typeName}`)}function P(e,n){let t=e.localName;if(e.repeated)return n[t].length>0;if(e.oneof)return n[e.oneof.localName].case===t;switch(e.kind){case"enum":case"scalar":if(e.opt||e.req)return void 0!==n[t];if("enum"==e.kind)return n[t]!==e.T.values[0].no;return!I(e.T,n[t]);case"message":return void 0!==n[t];case"map":return Object.keys(n[t]).length>0}}function D(e,n){let t=e.localName,a=!e.opt&&!e.req;if(e.repeated)n[t]=[];else if(e.oneof)n[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":n[t]={};break;case"enum":n[t]=a?e.T.values[0].no:void 0;break;case"scalar":n[t]=a?S(e.T,e.L):void 0;break;case"message":n[t]=void 0}}function F(e,n){if(null===e||"object"!=typeof e||!Object.getOwnPropertyNames(c.prototype).every(n=>n in e&&"function"==typeof e[n]))return!1;let t=e.getType();return null!==t&&"function"==typeof t&&"typeName"in t&&"string"==typeof t.typeName&&(void 0===n||t.typeName==n.typeName)}function U(e,n){return F(n)||!e.fieldWrapper?n:e.fieldWrapper.wrapField(n)}nZ.DOUBLE,nZ.FLOAT,nZ.INT64,nZ.UINT64,nZ.INT32,nZ.UINT32,nZ.BOOL,nZ.STRING,nZ.BYTES;let M={ignoreUnknownFields:!1},L={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},C=Symbol(),H=Symbol();function B(e){if(null===e)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":`"${e.split('"').join('\\"')}"`;default:return String(e)}}function J(e,n,t,r,i){let s=t.localName;if(t.repeated){if(a("map"!=t.kind),null===n)return;if(!Array.isArray(n))throw Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${B(n)}`);let o=e[s];for(let e of n){if(null===e)throw Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${B(e)}`);switch(t.kind){case"message":o.push(t.T.fromJson(e,r));break;case"enum":let n=x(t.T,e,r.ignoreUnknownFields,!0);n!==H&&o.push(n);break;case"scalar":try{o.push($(t.T,e,t.L,!0))}catch(a){let n=`cannot decode field ${i.typeName}.${t.name} from JSON: ${B(e)}`;throw a instanceof Error&&a.message.length>0&&(n+=`: ${a.message}`),Error(n)}}}}else if("map"==t.kind){if(null===n)return;if("object"!=typeof n||Array.isArray(n))throw Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${B(n)}`);let a=e[s];for(let[e,s]of Object.entries(n)){let o;if(null===s)throw Error(`cannot decode field ${i.typeName}.${t.name} from JSON: map value null`);try{o=function(e,n){if(e===nZ.BOOL)switch(n){case"true":n=!0;break;case"false":n=!1}return $(e,n,nQ.BIGINT,!0).toString()}(t.K,e)}catch(a){let e=`cannot decode map key for field ${i.typeName}.${t.name} from JSON: ${B(n)}`;throw a instanceof Error&&a.message.length>0&&(e+=`: ${a.message}`),Error(e)}switch(t.V.kind){case"message":a[o]=t.V.T.fromJson(s,r);break;case"enum":let m=x(t.V.T,s,r.ignoreUnknownFields,!0);m!==H&&(a[o]=m);break;case"scalar":try{a[o]=$(t.V.T,s,nQ.BIGINT,!0)}catch(a){let e=`cannot decode map value for field ${i.typeName}.${t.name} from JSON: ${B(n)}`;throw a instanceof Error&&a.message.length>0&&(e+=`: ${a.message}`),Error(e)}}}}else switch(t.oneof&&(e=e[t.oneof.localName]={case:s},s="value"),t.kind){case"message":let o=t.T;if(null===n&&"google.protobuf.Value"!=o.typeName)return;let m=e[s];F(m)?m.fromJson(n,r):(e[s]=m=o.fromJson(n,r),o.fieldWrapper&&!t.oneof&&(e[s]=o.fieldWrapper.unwrapField(m)));break;case"enum":let l=x(t.T,n,r.ignoreUnknownFields,!1);switch(l){case C:D(t,e);break;case H:break;default:e[s]=l}break;case"scalar":try{let a=$(t.T,n,t.L,!1);a===C?D(t,e):e[s]=a}catch(a){let e=`cannot decode field ${i.typeName}.${t.name} from JSON: ${B(n)}`;throw a instanceof Error&&a.message.length>0&&(e+=`: ${a.message}`),Error(e)}}}function $(e,n,t,a){if(null===n)return a?S(e,t):C;switch(e){case nZ.DOUBLE:case nZ.FLOAT:if("NaN"===n)return Number.NaN;if("Infinity"===n)return Number.POSITIVE_INFINITY;if("-Infinity"===n)return Number.NEGATIVE_INFINITY;if(""===n||"string"==typeof n&&n.trim().length!==n.length||"string"!=typeof n&&"number"!=typeof n)break;let o=Number(n);if(Number.isNaN(o)||!Number.isFinite(o))break;return e==nZ.FLOAT&&s(o),o;case nZ.INT32:case nZ.FIXED32:case nZ.SFIXED32:case nZ.SINT32:case nZ.UINT32:let m;if("number"==typeof n?m=n:"string"==typeof n&&n.length>0&&n.trim().length===n.length&&(m=Number(n)),void 0===m)break;return e==nZ.UINT32||e==nZ.FIXED32?i(m):r(m),m;case nZ.INT64:case nZ.SFIXED64:case nZ.SINT64:if("number"!=typeof n&&"string"!=typeof n)break;let l=E.parse(n);return t?l.toString():l;case nZ.FIXED64:case nZ.UINT64:if("number"!=typeof n&&"string"!=typeof n)break;let d=E.uParse(n);return t?d.toString():d;case nZ.BOOL:if("boolean"!=typeof n)break;return n;case nZ.STRING:if("string"!=typeof n)break;try{encodeURIComponent(n)}catch(e){throw Error("invalid UTF8")}return n;case nZ.BYTES:if(""===n)return new Uint8Array(0);if("string"!=typeof n)break;return O.dec(n)}throw Error()}function x(e,n,t,a){if(null===n)return"google.protobuf.NullValue"==e.typeName?0:a?e.values[0].no:C;switch(typeof n){case"number":if(Number.isInteger(n))return n;break;case"string":let r=e.findName(n);if(void 0!==r)return r.no;if(t)return H}throw Error(`cannot decode enum ${e.typeName} from JSON: ${B(n)}`)}function j(e,n,t){if("map"==e.kind){a("object"==typeof n&&null!=n);let r={},i=Object.entries(n);switch(e.V.kind){case"scalar":for(let[n,t]of i)r[n.toString()]=K(e.V.T,t);break;case"message":for(let[e,n]of i)r[e.toString()]=n.toJson(t);break;case"enum":let s=e.V.T;for(let[e,n]of i)r[e.toString()]=G(s,n,t.enumAsInteger)}return t.emitDefaultValues||i.length>0?r:void 0}if(e.repeated){a(Array.isArray(n));let r=[];switch(e.kind){case"scalar":for(let t=0;t<n.length;t++)r.push(K(e.T,n[t]));break;case"enum":for(let a=0;a<n.length;a++)r.push(G(e.T,n[a],t.enumAsInteger));break;case"message":for(let e=0;e<n.length;e++)r.push(n[e].toJson(t))}return t.emitDefaultValues||r.length>0?r:void 0}switch(e.kind){case"scalar":return K(e.T,n);case"enum":return G(e.T,n,t.enumAsInteger);case"message":return U(e.T,n).toJson(t)}}function G(e,n,t){var r;if(a("number"==typeof n),"google.protobuf.NullValue"==e.typeName)return null;if(t)return n;let i=e.findNumber(n);return null!==(r=null==i?void 0:i.name)&&void 0!==r?r:n}function K(e,n){switch(e){case nZ.INT32:case nZ.SFIXED32:case nZ.SINT32:case nZ.FIXED32:case nZ.UINT32:return a("number"==typeof n),n;case nZ.FLOAT:case nZ.DOUBLE:if(a("number"==typeof n),Number.isNaN(n))return"NaN";if(n===Number.POSITIVE_INFINITY)return"Infinity";if(n===Number.NEGATIVE_INFINITY)return"-Infinity";return n;case nZ.STRING:return a("string"==typeof n),n;case nZ.BOOL:return a("boolean"==typeof n),n;case nZ.UINT64:case nZ.FIXED64:case nZ.INT64:case nZ.SFIXED64:case nZ.SINT64:return a("bigint"==typeof n||"string"==typeof n||"number"==typeof n),n.toString();case nZ.BYTES:return a(n instanceof Uint8Array),O.enc(n)}}!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(n0||(n0={}));class V{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let n=0;n<this.chunks.length;n++)e+=this.chunks[n].length;let n=new Uint8Array(e),t=0;for(let e=0;e<this.chunks.length;e++)n.set(this.chunks[e],t),t+=this.chunks[e].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(i(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return r(e),y(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){s(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){i(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){r(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return r(e),y(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let n=new Uint8Array(8),t=new DataView(n.buffer),a=E.enc(e);return t.setInt32(0,a.lo,!0),t.setInt32(4,a.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),t=new DataView(n.buffer),a=E.uEnc(e);return t.setInt32(0,a.lo,!0),t.setInt32(4,a.hi,!0),this.raw(n)}int64(e){let n=E.enc(e);return p(n.lo,n.hi,this.buf),this}sint64(e){let n=E.enc(e),t=n.hi>>31;return p(n.lo<<1^t,(n.hi<<1|n.lo>>>31)^t,this.buf),this}uint64(e){let n=E.uEnc(e);return p(n.lo,n.hi,this.buf),this}}class W{constructor(e,n){this.varint64=u,this.uint32=_,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!=n?n:new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,t=7&e;if(n<=0||t<0||t>5)throw Error("illegal tag: field no "+n+" wire type "+t);return[n,t]}skip(e,n){let t=this.pos;switch(e){case n0.Varint:for(;128&this.buf[this.pos++];);break;case n0.Bit64:this.pos+=4;case n0.Bit32:this.pos+=4;break;case n0.LengthDelimited:let a=this.uint32();this.pos+=a;break;case n0.StartGroup:for(;;){let[e,t]=this.tag();if(t===n0.EndGroup){if(void 0!==n&&e!==n)throw Error("invalid end group tag");break}this.skip(t,e)}break;default:throw Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return E.dec(...this.varint64())}uint64(){return E.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),t=-(1&e);return e=(e>>>1|(1&n)<<31)^t,n=n>>>1^t,E.dec(e,n)}bool(){let[e,n]=this.varint64();return 0!==e||0!==n}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return E.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return E.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}let Y=Symbol("@bufbuild/protobuf/unknown-fields"),q={readUnknownFields:!0,readerFactory:e=>new W(e)},X={writeUnknownFields:!0,writerFactory:()=>new V};function z(e,n,t,a,r){let{repeated:i,localName:s}=t;switch(t.oneof&&((e=e[t.oneof.localName]).case!=s&&delete e.value,e.case=s,s="value"),t.kind){case"scalar":case"enum":let o="enum"==t.kind?nZ.INT32:t.T,m=ee;if("scalar"==t.kind&&t.L>0&&(m=Q),i){let t=e[s];if(a==n0.LengthDelimited&&o!=nZ.STRING&&o!=nZ.BYTES){let e=n.uint32()+n.pos;for(;n.pos<e;)t.push(m(n,o))}else t.push(m(n,o))}else e[s]=m(n,o);break;case"message":let l=t.T;i?e[s].push(Z(n,new l,r,t)):F(e[s])?Z(n,e[s],r,t):(e[s]=Z(n,new l,r,t),!l.fieldWrapper||t.oneof||t.repeated||(e[s]=l.fieldWrapper.unwrapField(e[s])));break;case"map":let[d,c]=function(e,n,t){let a,r;let i=n.uint32(),s=n.pos+i;for(;n.pos<s;){let[i]=n.tag();switch(i){case 1:a=ee(n,e.K);break;case 2:switch(e.V.kind){case"scalar":r=ee(n,e.V.T);break;case"enum":r=n.int32();break;case"message":r=Z(n,new e.V.T,t,void 0)}}}if(void 0===a&&(a=S(e.K,nQ.BIGINT)),"string"!=typeof a&&"number"!=typeof a&&(a=a.toString()),void 0===r)switch(e.V.kind){case"scalar":r=S(e.V.T,nQ.BIGINT);break;case"enum":r=e.V.T.values[0].no;break;case"message":r=new e.V.T}return[a,r]}(t,n,r);e[s][d]=c}}function Z(e,n,t,a){let r=n.getType().runtime.bin,i=null==a?void 0:a.delimited;return r.readMessage(n,e,i?a.no:e.uint32(),t,i),n}function Q(e,n){let t=ee(e,n);return"bigint"==typeof t?t.toString():t}function ee(e,n){switch(n){case nZ.STRING:return e.string();case nZ.BOOL:return e.bool();case nZ.DOUBLE:return e.double();case nZ.FLOAT:return e.float();case nZ.INT32:return e.int32();case nZ.INT64:return e.int64();case nZ.UINT64:return e.uint64();case nZ.FIXED64:return e.fixed64();case nZ.BYTES:return e.bytes();case nZ.FIXED32:return e.fixed32();case nZ.SFIXED32:return e.sfixed32();case nZ.SFIXED64:return e.sfixed64();case nZ.SINT64:return e.sint64();case nZ.UINT32:return e.uint32();case nZ.SINT32:return e.sint32()}}function en(e,n,t,r){a(void 0!==n);let i=e.repeated;switch(e.kind){case"scalar":case"enum":let s="enum"==e.kind?nZ.INT32:e.T;if(i){if(a(Array.isArray(n)),e.packed)(function(e,n,t,a){if(!a.length)return;e.tag(t,n0.LengthDelimited).fork();let[,r]=er(n);for(let n=0;n<a.length;n++)e[r](a[n]);e.join()})(t,s,e.no,n);else for(let a of n)ea(t,s,e.no,a)}else ea(t,s,e.no,n);break;case"message":if(i)for(let i of(a(Array.isArray(n)),n))et(t,r,e,i);else et(t,r,e,n);break;case"map":for(let[i,s]of(a("object"==typeof n&&null!=n),Object.entries(n)))(function(e,n,t,r,i){e.tag(t.no,n0.LengthDelimited),e.fork();let s=r;switch(t.K){case nZ.INT32:case nZ.FIXED32:case nZ.UINT32:case nZ.SFIXED32:case nZ.SINT32:s=Number.parseInt(r);break;case nZ.BOOL:a("true"==r||"false"==r),s="true"==r}switch(ea(e,t.K,1,s),t.V.kind){case"scalar":ea(e,t.V.T,2,i);break;case"enum":ea(e,nZ.INT32,2,i);break;case"message":a(void 0!==i),e.tag(2,n0.LengthDelimited).bytes(i.toBinary(n))}e.join()})(t,r,e,i,s)}}function et(e,n,t,a){let r=U(t.T,a);t.delimited?e.tag(t.no,n0.StartGroup).raw(r.toBinary(n)).tag(t.no,n0.EndGroup):e.tag(t.no,n0.LengthDelimited).bytes(r.toBinary(n))}function ea(e,n,t,r){a(void 0!==r);let[i,s]=er(n);e.tag(t,i)[s](r)}function er(e){let n=n0.Varint;switch(e){case nZ.BYTES:case nZ.STRING:n=n0.LengthDelimited;break;case nZ.DOUBLE:case nZ.FIXED64:case nZ.SFIXED64:n=n0.Bit64;break;case nZ.FIXED32:case nZ.SFIXED32:case nZ.FLOAT:n=n0.Bit32}return[n,nZ[e].toLowerCase()]}function ei(e){if(void 0===e)return e;if(F(e))return e.clone();if(e instanceof Uint8Array){let n=new Uint8Array(e.byteLength);return n.set(e),n}return e}function es(e){return e instanceof Uint8Array?e:new Uint8Array(e)}class eo{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){let e={};for(let n of this.list())e[n.jsonName]=e[n.name]=n;this.jsonNames=e}return this.jsonNames[e]}find(e){if(!this.numbers){let e={};for(let n of this.list())e[n.no]=n;this.numbers=e}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){let e;this.members=[];let n=this.members;for(let t of this.list())t.oneof?t.oneof!==e&&(e=t.oneof,n.push(e)):n.push(t)}return this.members}}function em(e,n){let t=ed(e);return n?t:eT(ef(t))}let el=ed;function ed(e){let n=!1,t=[];for(let a=0;a<e.length;a++){let r=e.charAt(a);switch(r){case"_":n=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(r),n=!1;break;default:n&&(n=!1,r=r.toUpperCase()),t.push(r)}}return t.join("")}let ec=new Set(["constructor","toString","toJSON","valueOf"]),eu=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),ep=e=>`${e}$`,ef=e=>eu.has(e)?ep(e):e,eT=e=>ec.has(e)?ep(e):e;class ek{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=em(e,!1)}addField(e){a(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[e]}}let eh=(nX=e=>new eo(e,e=>(function(e,n){var t,a,r,i,s,o;let m;let l=[];for(let d of"function"==typeof e?e():e){if(d.localName=em(d.name,void 0!==d.oneof),d.jsonName=null!==(t=d.jsonName)&&void 0!==t?t:el(d.name),d.repeated=null!==(a=d.repeated)&&void 0!==a&&a,"scalar"==d.kind&&(d.L=null!==(r=d.L)&&void 0!==r?r:nQ.BIGINT),d.delimited=null!==(i=d.delimited)&&void 0!==i&&i,d.req=null!==(s=d.req)&&void 0!==s&&s,d.opt=null!==(o=d.opt)&&void 0!==o&&o,void 0===d.packed&&(n?d.packed="enum"==d.kind||"scalar"==d.kind&&d.T!=nZ.BYTES&&d.T!=nZ.STRING:d.packed=!1),void 0!==d.oneof){let e="string"==typeof d.oneof?d.oneof:d.oneof.name;m&&m.name==e||(m=new ek(e)),d.oneof=m,m.addField(d)}l.push(d)}return l})(e,!0)),nz=e=>{for(let n of e.getType().fields.byMember()){if(n.opt)continue;let t=n.localName;if(n.repeated){e[t]=[];continue}switch(n.kind){case"oneof":e[t]={case:void 0};break;case"enum":e[t]=0;break;case"map":e[t]={};break;case"scalar":e[t]=S(n.T,n.L)}}},{syntax:"proto3",json:{makeReadOptions:function(e){return e?Object.assign(Object.assign({},M),e):M},makeWriteOptions:function(e){return e?Object.assign(Object.assign({},L),e):L},readMessage(e,n,t,a){if(null==n||Array.isArray(n)||"object"!=typeof n)throw Error(`cannot decode message ${e.typeName} from JSON: ${B(n)}`);a=null!=a?a:new e;let r=new Map,i=t.typeRegistry;for(let[s,o]of Object.entries(n)){let n=e.fields.findJsonName(s);if(n){if(n.oneof){if(null===o&&"scalar"==n.kind)continue;let t=r.get(n.oneof);if(void 0!==t)throw Error(`cannot decode message ${e.typeName} from JSON: multiple keys for oneof "${n.oneof.name}" present: "${t}", "${s}"`);r.set(n.oneof,s)}J(a,o,n,t,e)}else{let n=!1;if((null==i?void 0:i.findExtension)&&s.startsWith("[")&&s.endsWith("]")){let r=i.findExtension(s.substring(1,s.length-1));if(r&&r.extendee.typeName==e.typeName){n=!0;let[e,i]=N(r);J(e,o,r.field,t,r),function(e,n,t,a){R(n,e);let r=n.runtime.bin.makeReadOptions(a),i=n.runtime.bin.makeWriteOptions(a);if(A(e,n)){let t=e.getType().runtime.bin.listUnknownFields(e).filter(e=>e.no!=n.field.no);for(let n of(e.getType().runtime.bin.discardUnknownFields(e),t))e.getType().runtime.bin.onUnknownField(e,n.no,n.wireType,n.data)}let s=i.writerFactory(),o=n.field;o.opt||o.repeated||"enum"!=o.kind&&"scalar"!=o.kind||(o=Object.assign(Object.assign({},n.field),{opt:!0})),n.runtime.bin.writeField(o,t,s,i);let m=r.readerFactory(s.finish());for(;m.pos<m.len;){let[n,t]=m.tag(),a=m.skip(t,n);e.getType().runtime.bin.onUnknownField(e,n,t,a)}}(a,r,i(),t)}}if(!n&&!t.ignoreUnknownFields)throw Error(`cannot decode message ${e.typeName} from JSON: key "${s}" is unknown`)}}return a},writeMessage(e,n){let t;let a=e.getType(),r={};try{for(t of a.fields.byNumber()){if(!P(t,e)){if(t.req)throw"required field not set";if(!n.emitDefaultValues||!(t.repeated||"map"==t.kind||!t.oneof&&"message"!=t.kind&&!t.opt&&!t.req))continue}let a=t.oneof?e[t.oneof.localName].value:e[t.localName],i=j(t,a,n);void 0!==i&&(r[n.useProtoFieldName?t.name:t.jsonName]=i)}let i=n.typeRegistry;if(null==i?void 0:i.findExtensionFor)for(let t of a.runtime.bin.listUnknownFields(e)){let s=i.findExtensionFor(a.typeName,t.no);if(s&&A(e,s)){let t=function(e,n,t){R(n,e);let a=n.runtime.bin.makeReadOptions(t),r=function(e,n){if(!n.repeated&&("enum"==n.kind||"scalar"==n.kind)){for(let t=e.length-1;t>=0;--t)if(e[t].no==n.no)return[e[t]];return[]}return e.filter(e=>e.no===n.no)}(e.getType().runtime.bin.listUnknownFields(e),n.field),[i,s]=N(n);for(let e of r)n.runtime.bin.readField(i,a.readerFactory(e.data),n.field,e.wireType,a);return s()}(e,s,n),a=j(s.field,t,n);void 0!==a&&(r[s.field.jsonName]=a)}}}catch(r){let e=t?`cannot encode field ${a.typeName}.${t.name} to JSON`:`cannot encode message ${a.typeName} to JSON`,n=r instanceof Error?r.message:String(r);throw Error(e+(n.length>0?`: ${n}`:""))}return r},readScalar:(e,n,t)=>$(e,n,null!=t?t:nQ.BIGINT,!0),writeScalar(e,n,t){if(void 0!==n&&(t||I(e,n)))return K(e,n)},debug:B},bin:{makeReadOptions:function(e){return e?Object.assign(Object.assign({},q),e):q},makeWriteOptions:function(e){return e?Object.assign(Object.assign({},X),e):X},listUnknownFields(e){var n;return null!==(n=e[Y])&&void 0!==n?n:[]},discardUnknownFields(e){delete e[Y]},writeUnknownFields(e,n){let t=e[Y];if(t)for(let e of t)n.tag(e.no,e.wireType).raw(e.data)},onUnknownField(e,n,t,a){Array.isArray(e[Y])||(e[Y]=[]),e[Y].push({no:n,wireType:t,data:a})},readMessage(e,n,t,a,r){let i,s;let o=e.getType(),m=r?n.len:n.pos+t;for(;n.pos<m&&([i,s]=n.tag(),!0!==r||s!=n0.EndGroup);){let t=o.fields.find(i);if(!t){let t=n.skip(s,i);a.readUnknownFields&&this.onUnknownField(e,i,s,t);continue}z(e,n,t,s,a)}if(r&&(s!=n0.EndGroup||i!==t))throw Error("invalid end group tag")},readField:z,writeMessage(e,n,t){let a=e.getType();for(let r of a.fields.byNumber()){if(!P(r,e)){if(r.req)throw Error(`cannot encode field ${a.typeName}.${r.name} to binary: required field not set`);continue}let i=r.oneof?e[r.oneof.localName].value:e[r.localName];en(r,i,n,t)}return t.writeUnknownFields&&this.writeUnknownFields(e,n),n},writeField(e,n,t,a){void 0!==n&&en(e,n,t,a)}},util:Object.assign(Object.assign({},{setEnumType:m,initPartial(e,n){if(void 0!==e)for(let t of n.getType().fields.byMember()){let a=t.localName;if(null!=e[a])switch(t.kind){case"oneof":let r=e[a].case;if(void 0===r)continue;let i=t.findField(r),s=e[a].value;i&&"message"==i.kind&&!F(s,i.T)?s=new i.T(s):i&&"scalar"===i.kind&&i.T===nZ.BYTES&&(s=es(s)),n[a]={case:r,value:s};break;case"scalar":case"enum":let o=e[a];t.T===nZ.BYTES&&(o=t.repeated?o.map(es):es(o)),n[a]=o;break;case"map":switch(t.V.kind){case"scalar":case"enum":if(t.V.T===nZ.BYTES)for(let[t,r]of Object.entries(e[a]))n[a][t]=es(r);else Object.assign(n[a],e[a]);break;case"message":let m=t.V.T;for(let t of Object.keys(e[a])){let r=e[a][t];m.fieldWrapper||(r=new m(r)),n[a][t]=r}}break;case"message":let l=t.T;if(t.repeated)n[a]=e[a].map(e=>F(e,l)?e:new l(e));else{let t=e[a];l.fieldWrapper?"google.protobuf.BytesValue"===l.typeName?n[a]=es(t):n[a]=t:n[a]=F(t,l)?t:new l(t)}}}},equals:(e,n,t)=>n===t||!!n&&!!t&&e.fields.byMember().every(e=>{let a=n[e.localName],r=t[e.localName];if(e.repeated){if(a.length!==r.length)return!1;switch(e.kind){case"message":return a.every((n,t)=>e.T.equals(n,r[t]));case"scalar":return a.every((n,t)=>b(e.T,n,r[t]));case"enum":return a.every((e,n)=>b(nZ.INT32,e,r[n]))}throw Error(`repeated cannot contain ${e.kind}`)}switch(e.kind){case"message":let i=a,s=r;return e.T.fieldWrapper&&(void 0===i||F(i)||(i=e.T.fieldWrapper.wrapField(i)),void 0===s||F(s)||(s=e.T.fieldWrapper.wrapField(s))),e.T.equals(i,s);case"enum":return b(nZ.INT32,a,r);case"scalar":return b(e.T,a,r);case"oneof":if(a.case!==r.case)return!1;let o=e.findField(a.case);if(void 0===o)return!0;switch(o.kind){case"message":return o.T.equals(a.value,r.value);case"enum":return b(nZ.INT32,a.value,r.value);case"scalar":return b(o.T,a.value,r.value)}throw Error(`oneof cannot contain ${o.kind}`);case"map":let m=Object.keys(a).concat(Object.keys(r));switch(e.V.kind){case"message":let l=e.V.T;return m.every(e=>l.equals(a[e],r[e]));case"enum":return m.every(e=>b(nZ.INT32,a[e],r[e]));case"scalar":let d=e.V.T;return m.every(e=>b(d,a[e],r[e]))}}}),clone(e){let n=e.getType(),t=new n;for(let a of n.fields.byMember()){let n;let r=e[a.localName];if(a.repeated)n=r.map(ei);else if("map"==a.kind)for(let[e,i]of(n=t[a.localName],Object.entries(r)))n[e]=ei(i);else n="oneof"==a.kind?a.findField(r.case)?{case:r.case,value:ei(r.value)}:{case:void 0}:ei(r);t[a.localName]=n}for(let a of n.runtime.bin.listUnknownFields(e))n.runtime.bin.onUnknownField(t,a.no,a.wireType,a.data);return t}}),{newFieldList:nX,initFields:nz}),makeMessageType(e,n,t){return function(e,n,t,a){var r;let i=null!==(r=null==a?void 0:a.localName)&&void 0!==r?r:n.substring(n.lastIndexOf(".")+1),s={[i]:function(n){e.util.initFields(this),e.util.initPartial(n,this)}}[i];return Object.setPrototypeOf(s.prototype,new c),Object.assign(s,{runtime:e,typeName:n,fields:e.util.newFieldList(t),fromBinary:(e,n)=>new s().fromBinary(e,n),fromJson:(e,n)=>new s().fromJson(e,n),fromJsonString:(e,n)=>new s().fromJsonString(e,n),equals:(n,t)=>e.util.equals(s,n,t)}),s}(this,e,n,t)},makeEnum:function(e,n,t){let a={};for(let e of n){let n=d(e);a[n.localName]=n.no,a[n.no]=n.localName}return m(a,e,n,t),a},makeEnumType:l,getEnumType:function(e){let n=e[o];return a(n,"missing enum type on enum object"),n},makeExtension(e,n,t){var a;let r;return a=this,{typeName:e,extendee:n,get field(){if(!r){let n="function"==typeof t?t():t;n.name=e.split(".").pop(),n.jsonName=`[${e}]`,r=a.util.newFieldList([n]).list()[0]}return r},runtime:a}}});class eg extends c{constructor(e){super(),this.seconds=E.zero,this.nanos=0,eh.util.initPartial(e,this)}fromJson(e,n){if("string"!=typeof e)throw Error(`cannot decode google.protobuf.Timestamp from JSON: ${eh.json.debug(e)}`);let t=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!t)throw Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");let a=Date.parse(t[1]+"-"+t[2]+"-"+t[3]+"T"+t[4]+":"+t[5]+":"+t[6]+(t[8]?t[8]:"Z"));if(Number.isNaN(a))throw Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=E.parse(a/1e3),this.nanos=0,t[7]&&(this.nanos=parseInt("1"+t[7]+"0".repeat(9-t[7].length))-1e9),this}toJson(e){let n=1e3*Number(this.seconds);if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let t="Z";if(this.nanos>0){let e=(this.nanos+1e9).toString().substring(1);t="000000"===e.substring(3)?"."+e.substring(0,3)+"Z":"000"===e.substring(6)?"."+e.substring(0,6)+"Z":"."+e+"Z"}return new Date(n).toISOString().replace(".000Z",t)}toDate(){return new Date(1e3*Number(this.seconds)+Math.ceil(this.nanos/1e6))}static now(){return eg.fromDate(new Date)}static fromDate(e){let n=e.getTime();return new eg({seconds:E.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new eg().fromBinary(e,n)}static fromJson(e,n){return new eg().fromJson(e,n)}static fromJsonString(e,n){return new eg().fromJsonString(e,n)}static equals(e,n){return eh.util.equals(eg,e,n)}}eg.runtime=eh,eg.typeName="google.protobuf.Timestamp",eg.fields=eh.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class ey extends c{constructor(e){super(),this.seconds=E.zero,this.nanos=0,eh.util.initPartial(e,this)}fromJson(e,n){if("string"!=typeof e)throw Error(`cannot decode google.protobuf.Duration from JSON: ${eh.json.debug(e)}`);let t=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(null===t)throw Error(`cannot decode google.protobuf.Duration from JSON: ${eh.json.debug(e)}`);let a=Number(t[1]);if(a>315576e6||a<-315576e6)throw Error(`cannot decode google.protobuf.Duration from JSON: ${eh.json.debug(e)}`);if(this.seconds=E.parse(a),"string"==typeof t[2]){let e=t[2]+"0".repeat(9-t[2].length);this.nanos=parseInt(e),(a<0||Object.is(a,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||-315576e6>Number(this.seconds))throw Error("cannot encode google.protobuf.Duration to JSON: value out of range");let n=this.seconds.toString();if(0!==this.nanos){let e=Math.abs(this.nanos).toString();"000000"===(e="0".repeat(9-e.length)+e).substring(3)?e=e.substring(0,3):"000"===e.substring(6)&&(e=e.substring(0,6)),n+="."+e,this.nanos<0&&0==Number(this.seconds)&&(n="-"+n)}return n+"s"}static fromBinary(e,n){return new ey().fromBinary(e,n)}static fromJson(e,n){return new ey().fromJson(e,n)}static fromJsonString(e,n){return new ey().fromJsonString(e,n)}static equals(e,n){return eh.util.equals(ey,e,n)}}ey.runtime=eh,ey.typeName="google.protobuf.Duration",ey.fields=eh.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);let e_=eh.makeEnum("livekit.agent.ChatRole",[{no:0,name:"DEVELOPER"},{no:1,name:"SYSTEM"},{no:2,name:"USER"},{no:3,name:"ASSISTANT"}]),eE=eh.makeMessageType("livekit.agent.MetricsReport",()=>[{no:1,name:"started_speaking_at",kind:"message",T:eg},{no:2,name:"stopped_speaking_at",kind:"message",T:eg},{no:3,name:"transcription_delay",kind:"scalar",T:1,opt:!0},{no:4,name:"end_of_turn_delay",kind:"scalar",T:1,opt:!0},{no:5,name:"on_user_turn_completed_delay",kind:"scalar",T:1,opt:!0},{no:6,name:"llm_node_ttft",kind:"scalar",T:1,opt:!0},{no:7,name:"tts_node_ttfb",kind:"scalar",T:1,opt:!0},{no:8,name:"e2e_latency",kind:"scalar",T:1,opt:!0}]),eb=eh.makeMessageType("livekit.agent.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"role",kind:"enum",T:eh.getEnumType(e_)},{no:3,name:"content",kind:"message",T:eS,repeated:!0},{no:4,name:"interrupted",kind:"scalar",T:8},{no:5,name:"transcript_confidence",kind:"scalar",T:1,opt:!0},{no:6,name:"extra",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:7,name:"metrics",kind:"message",T:eE},{no:8,name:"created_at",kind:"message",T:eg}]),eS=eh.makeMessageType("livekit.agent.ChatMessage.ChatContent",()=>[{no:1,name:"text",kind:"scalar",T:9,oneof:"payload"}],{localName:"ChatMessage_ChatContent"}),eI=eh.makeMessageType("livekit.agent.FunctionCall",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"call_id",kind:"scalar",T:9},{no:3,name:"arguments",kind:"scalar",T:9},{no:4,name:"name",kind:"scalar",T:9},{no:5,name:"created_at",kind:"message",T:eg}]),eN=eh.makeMessageType("livekit.agent.FunctionCallOutput",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"call_id",kind:"scalar",T:9},{no:4,name:"output",kind:"scalar",T:9},{no:5,name:"is_error",kind:"scalar",T:8},{no:6,name:"created_at",kind:"message",T:eg}]),ew=eh.makeMessageType("livekit.agent.AgentHandoff",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"old_agent_id",kind:"scalar",T:9,opt:!0},{no:3,name:"new_agent_id",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:eg}]),ev=(()=>[{no:1,name:"message",kind:"message",T:eb,oneof:"item"},{no:2,name:"function_call",kind:"message",T:eI,oneof:"item"},{no:3,name:"function_call_output",kind:"message",T:eN,oneof:"item"},{no:4,name:"agent_handoff",kind:"message",T:ew,oneof:"item"}],eh.makeEnum("livekit.AudioCodec",[{no:0,name:"DEFAULT_AC"},{no:1,name:"OPUS"},{no:2,name:"AAC"},{no:3,name:"AC_MP3"}])),eO=eh.makeEnum("livekit.VideoCodec",[{no:0,name:"DEFAULT_VC"},{no:1,name:"H264_BASELINE"},{no:2,name:"H264_MAIN"},{no:3,name:"H264_HIGH"},{no:4,name:"VP8"}]),eA=eh.makeEnum("livekit.ImageCodec",[{no:0,name:"IC_DEFAULT"},{no:1,name:"IC_JPEG"}]),eR=eh.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),eP=eh.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),eD=eh.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),eF=eh.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),eU=eh.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),eM=eh.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),eL=(()=>[{no:1,name:"after_id",kind:"scalar",T:9},{no:2,name:"limit",kind:"scalar",T:5}],eh.makeMessageType("livekit.ListUpdate",()=>[{no:1,name:"set",kind:"scalar",T:9,repeated:!0},{no:2,name:"add",kind:"scalar",T:9,repeated:!0},{no:3,name:"remove",kind:"scalar",T:9,repeated:!0},{no:4,name:"clear",kind:"scalar",T:8}])),eC=eh.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:eH,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:eX}]),eH=eh.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),eB=eh.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:eh.getEnumType(eD),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),eJ=eh.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:eh.getEnumType(e$)},{no:4,name:"tracks",kind:"message",T:eV,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:eB},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:eh.getEnumType(ex)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:eh.getEnumType(eU)},{no:18,name:"kind_details",kind:"enum",T:eh.getEnumType(ej),repeated:!0},{no:19,name:"data_tracks",kind:"message",T:eW,repeated:!0}]),e$=eh.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),ex=eh.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"},{no:7,name:"CONNECTOR"},{no:8,name:"BRIDGE"}]),ej=eh.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"},{no:2,name:"CONNECTOR_WHATSAPP"},{no:3,name:"CONNECTOR_TWILIO"},{no:4,name:"BRIDGE_RTSP"}]),eG=eh.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),eK=eh.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:eY,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:eh.getEnumType(eq)},{no:6,name:"sdp_cid",kind:"scalar",T:9}]),eV=eh.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:eh.getEnumType(eP)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:eh.getEnumType(eD)},{no:10,name:"layers",kind:"message",T:eY,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:eK,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:eh.getEnumType(eG)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:eX},{no:19,name:"audio_features",kind:"enum",T:eh.getEnumType(eM),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:eh.getEnumType(eR)}]),eW=eh.makeMessageType("livekit.DataTrackInfo",()=>[{no:1,name:"pub_handle",kind:"scalar",T:13},{no:2,name:"sid",kind:"scalar",T:9},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"encryption",kind:"enum",T:eh.getEnumType(eG)}]),eY=(()=>[{no:1,name:"target_fps",kind:"scalar",T:13,opt:!0}],eh.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:eh.getEnumType(eF)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9},{no:8,name:"repair_ssrc",kind:"scalar",T:13}])),eq=eh.makeEnum("livekit.VideoLayer.Mode",[{no:0,name:"MODE_UNUSED"},{no:1,name:"ONE_SPATIAL_LAYER_PER_STREAM"},{no:2,name:"MULTIPLE_SPATIAL_LAYERS_PER_STREAM"},{no:3,name:"ONE_SPATIAL_LAYER_PER_STREAM_INCOMPLETE_RTCP_SR"}]),eX=eh.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),ez=eh.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),eZ=(()=>[{no:1,name:"operation_type",kind:"enum",T:eh.getEnumType(ez)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],eh.makeMessageType("livekit.FilterParams",()=>[{no:1,name:"include_events",kind:"scalar",T:9,repeated:!0},{no:2,name:"exclude_events",kind:"scalar",T:9,repeated:!0}])),eQ=eh.makeMessageType("livekit.WebhookConfig",()=>[{no:1,name:"url",kind:"scalar",T:9},{no:2,name:"signing_key",kind:"scalar",T:9},{no:3,name:"filter_params",kind:"message",T:eZ}]),e0=eh.makeEnum("livekit.JobType",[{no:0,name:"JT_ROOM"},{no:1,name:"JT_PUBLISHER"},{no:2,name:"JT_PARTICIPANT"}]),e1=eh.makeEnum("livekit.JobStatus",[{no:0,name:"JS_PENDING"},{no:1,name:"JS_RUNNING"},{no:2,name:"JS_SUCCESS"},{no:3,name:"JS_FAILED"}]),e2=eh.makeMessageType("livekit.Job",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:9,name:"dispatch_id",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:eh.getEnumType(e0)},{no:3,name:"room",kind:"message",T:eC},{no:4,name:"participant",kind:"message",T:eJ,opt:!0},{no:5,name:"namespace",kind:"scalar",T:9},{no:6,name:"metadata",kind:"scalar",T:9},{no:7,name:"agent_name",kind:"scalar",T:9},{no:8,name:"state",kind:"message",T:e3},{no:10,name:"enable_recording",kind:"scalar",T:8}]),e3=eh.makeMessageType("livekit.JobState",()=>[{no:1,name:"status",kind:"enum",T:eh.getEnumType(e1)},{no:2,name:"error",kind:"scalar",T:9},{no:3,name:"started_at",kind:"scalar",T:3},{no:4,name:"ended_at",kind:"scalar",T:3},{no:5,name:"updated_at",kind:"scalar",T:3},{no:6,name:"participant_identity",kind:"scalar",T:9},{no:7,name:"worker_id",kind:"scalar",T:9},{no:8,name:"agent_id",kind:"scalar",T:9}]),e9=eh.makeMessageType("livekit.RoomAgentDispatch",()=>[{no:1,name:"agent_name",kind:"scalar",T:9},{no:2,name:"metadata",kind:"scalar",T:9}]),e4=(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"agent_name",kind:"scalar",T:9},{no:3,name:"room",kind:"scalar",T:9},{no:4,name:"metadata",kind:"scalar",T:9},{no:5,name:"state",kind:"message",T:e4}],eh.makeMessageType("livekit.AgentDispatchState",()=>[{no:1,name:"jobs",kind:"message",T:e2,repeated:!0},{no:2,name:"created_at",kind:"scalar",T:3},{no:3,name:"deleted_at",kind:"scalar",T:3}])),e6=eh.makeEnum("livekit.EncodedFileType",[{no:0,name:"DEFAULT_FILETYPE"},{no:1,name:"MP4"},{no:2,name:"OGG"},{no:3,name:"MP3"}]),e5=eh.makeEnum("livekit.SegmentedFileProtocol",[{no:0,name:"DEFAULT_SEGMENTED_FILE_PROTOCOL"},{no:1,name:"HLS_PROTOCOL"}]),e8=eh.makeEnum("livekit.SegmentedFileSuffix",[{no:0,name:"INDEX"},{no:1,name:"TIMESTAMP"}]),e7=eh.makeEnum("livekit.ImageFileSuffix",[{no:0,name:"IMAGE_SUFFIX_INDEX"},{no:1,name:"IMAGE_SUFFIX_TIMESTAMP"},{no:2,name:"IMAGE_SUFFIX_NONE_OVERWRITE"}]),ne=eh.makeEnum("livekit.StreamProtocol",[{no:0,name:"DEFAULT_PROTOCOL"},{no:1,name:"RTMP"},{no:2,name:"SRT"}]),nn=eh.makeEnum("livekit.AudioMixing",[{no:0,name:"DEFAULT_MIXING"},{no:1,name:"DUAL_CHANNEL_AGENT"},{no:2,name:"DUAL_CHANNEL_ALTERNATE"}]),nt=eh.makeEnum("livekit.EncodingOptionsPreset",[{no:0,name:"H264_720P_30"},{no:1,name:"H264_720P_60"},{no:2,name:"H264_1080P_30"},{no:3,name:"H264_1080P_60"},{no:4,name:"PORTRAIT_H264_720P_30"},{no:5,name:"PORTRAIT_H264_720P_60"},{no:6,name:"PORTRAIT_H264_1080P_30"},{no:7,name:"PORTRAIT_H264_1080P_60"}]),na=eh.makeEnum("livekit.EgressStatus",[{no:0,name:"EGRESS_STARTING"},{no:1,name:"EGRESS_ACTIVE"},{no:2,name:"EGRESS_ENDING"},{no:3,name:"EGRESS_COMPLETE"},{no:4,name:"EGRESS_FAILED"},{no:5,name:"EGRESS_ABORTED"},{no:6,name:"EGRESS_LIMIT_REACHED"}]),nr=eh.makeEnum("livekit.EgressSourceType",[{no:0,name:"EGRESS_SOURCE_TYPE_WEB",localName:"WEB"},{no:1,name:"EGRESS_SOURCE_TYPE_SDK",localName:"SDK"}]),ni=eh.makeMessageType("livekit.RoomCompositeEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"layout",kind:"scalar",T:9},{no:3,name:"audio_only",kind:"scalar",T:8},{no:15,name:"audio_mixing",kind:"enum",T:eh.getEnumType(nn)},{no:4,name:"video_only",kind:"scalar",T:8},{no:5,name:"custom_base_url",kind:"scalar",T:9},{no:6,name:"file",kind:"message",T:nd,oneof:"output"},{no:7,name:"stream",kind:"message",T:ny,oneof:"output"},{no:10,name:"segments",kind:"message",T:nc,oneof:"output"},{no:8,name:"preset",kind:"enum",T:eh.getEnumType(nt),oneof:"options"},{no:9,name:"advanced",kind:"message",T:n_,oneof:"options"},{no:11,name:"file_outputs",kind:"message",T:nd,repeated:!0},{no:12,name:"stream_outputs",kind:"message",T:ny,repeated:!0},{no:13,name:"segment_outputs",kind:"message",T:nc,repeated:!0},{no:14,name:"image_outputs",kind:"message",T:np,repeated:!0},{no:16,name:"webhooks",kind:"message",T:eQ,repeated:!0}]),ns=eh.makeMessageType("livekit.WebEgressRequest",()=>[{no:1,name:"url",kind:"scalar",T:9},{no:2,name:"audio_only",kind:"scalar",T:8},{no:3,name:"video_only",kind:"scalar",T:8},{no:12,name:"await_start_signal",kind:"scalar",T:8},{no:4,name:"file",kind:"message",T:nd,oneof:"output"},{no:5,name:"stream",kind:"message",T:ny,oneof:"output"},{no:6,name:"segments",kind:"message",T:nc,oneof:"output"},{no:7,name:"preset",kind:"enum",T:eh.getEnumType(nt),oneof:"options"},{no:8,name:"advanced",kind:"message",T:n_,oneof:"options"},{no:9,name:"file_outputs",kind:"message",T:nd,repeated:!0},{no:10,name:"stream_outputs",kind:"message",T:ny,repeated:!0},{no:11,name:"segment_outputs",kind:"message",T:nc,repeated:!0},{no:13,name:"image_outputs",kind:"message",T:np,repeated:!0},{no:14,name:"webhooks",kind:"message",T:eQ,repeated:!0}]),no=eh.makeMessageType("livekit.ParticipantEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"screen_share",kind:"scalar",T:8},{no:4,name:"preset",kind:"enum",T:eh.getEnumType(nt),oneof:"options"},{no:5,name:"advanced",kind:"message",T:n_,oneof:"options"},{no:6,name:"file_outputs",kind:"message",T:nd,repeated:!0},{no:7,name:"stream_outputs",kind:"message",T:ny,repeated:!0},{no:8,name:"segment_outputs",kind:"message",T:nc,repeated:!0},{no:9,name:"image_outputs",kind:"message",T:np,repeated:!0},{no:10,name:"webhooks",kind:"message",T:eQ,repeated:!0}]),nm=eh.makeMessageType("livekit.TrackCompositeEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"audio_track_id",kind:"scalar",T:9},{no:3,name:"video_track_id",kind:"scalar",T:9},{no:4,name:"file",kind:"message",T:nd,oneof:"output"},{no:5,name:"stream",kind:"message",T:ny,oneof:"output"},{no:8,name:"segments",kind:"message",T:nc,oneof:"output"},{no:6,name:"preset",kind:"enum",T:eh.getEnumType(nt),oneof:"options"},{no:7,name:"advanced",kind:"message",T:n_,oneof:"options"},{no:11,name:"file_outputs",kind:"message",T:nd,repeated:!0},{no:12,name:"stream_outputs",kind:"message",T:ny,repeated:!0},{no:13,name:"segment_outputs",kind:"message",T:nc,repeated:!0},{no:14,name:"image_outputs",kind:"message",T:np,repeated:!0},{no:15,name:"webhooks",kind:"message",T:eQ,repeated:!0}]),nl=eh.makeMessageType("livekit.TrackEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"track_id",kind:"scalar",T:9},{no:3,name:"file",kind:"message",T:nu,oneof:"output"},{no:4,name:"websocket_url",kind:"scalar",T:9,oneof:"output"},{no:5,name:"webhooks",kind:"message",T:eQ,repeated:!0}]),nd=eh.makeMessageType("livekit.EncodedFileOutput",()=>[{no:1,name:"file_type",kind:"enum",T:eh.getEnumType(e6)},{no:2,name:"filepath",kind:"scalar",T:9},{no:6,name:"disable_manifest",kind:"scalar",T:8},{no:3,name:"s3",kind:"message",T:nf,oneof:"output"},{no:4,name:"gcp",kind:"message",T:nT,oneof:"output"},{no:5,name:"azure",kind:"message",T:nk,oneof:"output"},{no:7,name:"aliOSS",kind:"message",T:nh,oneof:"output"}]),nc=eh.makeMessageType("livekit.SegmentedFileOutput",()=>[{no:1,name:"protocol",kind:"enum",T:eh.getEnumType(e5)},{no:2,name:"filename_prefix",kind:"scalar",T:9},{no:3,name:"playlist_name",kind:"scalar",T:9},{no:11,name:"live_playlist_name",kind:"scalar",T:9},{no:4,name:"segment_duration",kind:"scalar",T:13},{no:10,name:"filename_suffix",kind:"enum",T:eh.getEnumType(e8)},{no:8,name:"disable_manifest",kind:"scalar",T:8},{no:5,name:"s3",kind:"message",T:nf,oneof:"output"},{no:6,name:"gcp",kind:"message",T:nT,oneof:"output"},{no:7,name:"azure",kind:"message",T:nk,oneof:"output"},{no:9,name:"aliOSS",kind:"message",T:nh,oneof:"output"}]),nu=eh.makeMessageType("livekit.DirectFileOutput",()=>[{no:1,name:"filepath",kind:"scalar",T:9},{no:5,name:"disable_manifest",kind:"scalar",T:8},{no:2,name:"s3",kind:"message",T:nf,oneof:"output"},{no:3,name:"gcp",kind:"message",T:nT,oneof:"output"},{no:4,name:"azure",kind:"message",T:nk,oneof:"output"},{no:6,name:"aliOSS",kind:"message",T:nh,oneof:"output"}]),np=eh.makeMessageType("livekit.ImageOutput",()=>[{no:1,name:"capture_interval",kind:"scalar",T:13},{no:2,name:"width",kind:"scalar",T:5},{no:3,name:"height",kind:"scalar",T:5},{no:4,name:"filename_prefix",kind:"scalar",T:9},{no:5,name:"filename_suffix",kind:"enum",T:eh.getEnumType(e7)},{no:6,name:"image_codec",kind:"enum",T:eh.getEnumType(eA)},{no:7,name:"disable_manifest",kind:"scalar",T:8},{no:8,name:"s3",kind:"message",T:nf,oneof:"output"},{no:9,name:"gcp",kind:"message",T:nT,oneof:"output"},{no:10,name:"azure",kind:"message",T:nk,oneof:"output"},{no:11,name:"aliOSS",kind:"message",T:nh,oneof:"output"}]),nf=eh.makeMessageType("livekit.S3Upload",()=>[{no:1,name:"access_key",kind:"scalar",T:9},{no:2,name:"secret",kind:"scalar",T:9},{no:11,name:"session_token",kind:"scalar",T:9},{no:12,name:"assume_role_arn",kind:"scalar",T:9},{no:13,name:"assume_role_external_id",kind:"scalar",T:9},{no:3,name:"region",kind:"scalar",T:9},{no:4,name:"endpoint",kind:"scalar",T:9},{no:5,name:"bucket",kind:"scalar",T:9},{no:6,name:"force_path_style",kind:"scalar",T:8},{no:7,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:8,name:"tagging",kind:"scalar",T:9},{no:9,name:"content_disposition",kind:"scalar",T:9},{no:10,name:"proxy",kind:"message",T:ng}]),nT=eh.makeMessageType("livekit.GCPUpload",()=>[{no:1,name:"credentials",kind:"scalar",T:9},{no:2,name:"bucket",kind:"scalar",T:9},{no:3,name:"proxy",kind:"message",T:ng}]),nk=eh.makeMessageType("livekit.AzureBlobUpload",()=>[{no:1,name:"account_name",kind:"scalar",T:9},{no:2,name:"account_key",kind:"scalar",T:9},{no:3,name:"container_name",kind:"scalar",T:9}]),nh=eh.makeMessageType("livekit.AliOSSUpload",()=>[{no:1,name:"access_key",kind:"scalar",T:9},{no:2,name:"secret",kind:"scalar",T:9},{no:3,name:"region",kind:"scalar",T:9},{no:4,name:"endpoint",kind:"scalar",T:9},{no:5,name:"bucket",kind:"scalar",T:9}]),ng=eh.makeMessageType("livekit.ProxyConfig",()=>[{no:1,name:"url",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"password",kind:"scalar",T:9}]),ny=eh.makeMessageType("livekit.StreamOutput",()=>[{no:1,name:"protocol",kind:"enum",T:eh.getEnumType(ne)},{no:2,name:"urls",kind:"scalar",T:9,repeated:!0}]),n_=eh.makeMessageType("livekit.EncodingOptions",()=>[{no:1,name:"width",kind:"scalar",T:5},{no:2,name:"height",kind:"scalar",T:5},{no:3,name:"depth",kind:"scalar",T:5},{no:4,name:"framerate",kind:"scalar",T:5},{no:5,name:"audio_codec",kind:"enum",T:eh.getEnumType(ev)},{no:6,name:"audio_bitrate",kind:"scalar",T:5},{no:11,name:"audio_quality",kind:"scalar",T:5},{no:7,name:"audio_frequency",kind:"scalar",T:5},{no:8,name:"video_codec",kind:"enum",T:eh.getEnumType(eO)},{no:9,name:"video_bitrate",kind:"scalar",T:5},{no:12,name:"video_quality",kind:"scalar",T:5},{no:10,name:"key_frame_interval",kind:"scalar",T:1}]),nE=(()=>[{no:1,name:"egress_id",kind:"scalar",T:9},{no:2,name:"room_id",kind:"scalar",T:9},{no:13,name:"room_name",kind:"scalar",T:9},{no:26,name:"source_type",kind:"enum",T:eh.getEnumType(nr)},{no:3,name:"status",kind:"enum",T:eh.getEnumType(na)},{no:10,name:"started_at",kind:"scalar",T:3},{no:11,name:"ended_at",kind:"scalar",T:3},{no:18,name:"updated_at",kind:"scalar",T:3},{no:21,name:"details",kind:"scalar",T:9},{no:9,name:"error",kind:"scalar",T:9},{no:22,name:"error_code",kind:"scalar",T:5},{no:4,name:"room_composite",kind:"message",T:ni,oneof:"request"},{no:14,name:"web",kind:"message",T:ns,oneof:"request"},{no:19,name:"participant",kind:"message",T:no,oneof:"request"},{no:5,name:"track_composite",kind:"message",T:nm,oneof:"request"},{no:6,name:"track",kind:"message",T:nl,oneof:"request"},{no:7,name:"stream",kind:"message",T:nE,oneof:"result"},{no:8,name:"file",kind:"message",T:nI,oneof:"result"},{no:12,name:"segments",kind:"message",T:nN,oneof:"result"},{no:15,name:"stream_results",kind:"message",T:nb,repeated:!0},{no:16,name:"file_results",kind:"message",T:nI,repeated:!0},{no:17,name:"segment_results",kind:"message",T:nN,repeated:!0},{no:20,name:"image_results",kind:"message",T:nw,repeated:!0},{no:23,name:"manifest_location",kind:"scalar",T:9},{no:25,name:"backup_storage_used",kind:"scalar",T:8}],eh.makeMessageType("livekit.StreamInfoList",()=>[{no:1,name:"info",kind:"message",T:nb,repeated:!0}])),nb=eh.makeMessageType("livekit.StreamInfo",()=>[{no:1,name:"url",kind:"scalar",T:9},{no:2,name:"started_at",kind:"scalar",T:3},{no:3,name:"ended_at",kind:"scalar",T:3},{no:4,name:"duration",kind:"scalar",T:3},{no:5,name:"status",kind:"enum",T:eh.getEnumType(nS)},{no:6,name:"error",kind:"scalar",T:9},{no:7,name:"last_retry_at",kind:"scalar",T:3},{no:8,name:"retries",kind:"scalar",T:13}]),nS=eh.makeEnum("livekit.StreamInfo.Status",[{no:0,name:"ACTIVE"},{no:1,name:"FINISHED"},{no:2,name:"FAILED"}]),nI=eh.makeMessageType("livekit.FileInfo",()=>[{no:1,name:"filename",kind:"scalar",T:9},{no:2,name:"started_at",kind:"scalar",T:3},{no:3,name:"ended_at",kind:"scalar",T:3},{no:6,name:"duration",kind:"scalar",T:3},{no:4,name:"size",kind:"scalar",T:3},{no:5,name:"location",kind:"scalar",T:9}]),nN=eh.makeMessageType("livekit.SegmentsInfo",()=>[{no:1,name:"playlist_name",kind:"scalar",T:9},{no:8,name:"live_playlist_name",kind:"scalar",T:9},{no:2,name:"duration",kind:"scalar",T:3},{no:3,name:"size",kind:"scalar",T:3},{no:4,name:"playlist_location",kind:"scalar",T:9},{no:9,name:"live_playlist_location",kind:"scalar",T:9},{no:5,name:"segment_count",kind:"scalar",T:3},{no:6,name:"started_at",kind:"scalar",T:3},{no:7,name:"ended_at",kind:"scalar",T:3}]),nw=eh.makeMessageType("livekit.ImagesInfo",()=>[{no:4,name:"filename_prefix",kind:"scalar",T:9},{no:1,name:"image_count",kind:"scalar",T:3},{no:2,name:"started_at",kind:"scalar",T:3},{no:3,name:"ended_at",kind:"scalar",T:3}]),nv=eh.makeMessageType("livekit.AutoParticipantEgress",()=>[{no:1,name:"preset",kind:"enum",T:eh.getEnumType(nt),oneof:"options"},{no:2,name:"advanced",kind:"message",T:n_,oneof:"options"},{no:3,name:"file_outputs",kind:"message",T:nd,repeated:!0},{no:4,name:"segment_outputs",kind:"message",T:nc,repeated:!0}]),nO=eh.makeMessageType("livekit.AutoTrackEgress",()=>[{no:1,name:"filepath",kind:"scalar",T:9},{no:5,name:"disable_manifest",kind:"scalar",T:8},{no:2,name:"s3",kind:"message",T:nf,oneof:"output"},{no:3,name:"gcp",kind:"message",T:nT,oneof:"output"},{no:4,name:"azure",kind:"message",T:nk,oneof:"output"},{no:6,name:"aliOSS",kind:"message",T:nh,oneof:"output"}]),nA=eh.makeEnum("livekit.IngressInput",[{no:0,name:"RTMP_INPUT"},{no:1,name:"WHIP_INPUT"},{no:2,name:"URL_INPUT"}]),nR=eh.makeEnum("livekit.IngressAudioEncodingPreset",[{no:0,name:"OPUS_STEREO_96KBPS"},{no:1,name:"OPUS_MONO_64KBS"}]),nP=eh.makeEnum("livekit.IngressVideoEncodingPreset",[{no:0,name:"H264_720P_30FPS_3_LAYERS"},{no:1,name:"H264_1080P_30FPS_3_LAYERS"},{no:2,name:"H264_540P_25FPS_2_LAYERS"},{no:3,name:"H264_720P_30FPS_1_LAYER"},{no:4,name:"H264_1080P_30FPS_1_LAYER"},{no:5,name:"H264_720P_30FPS_3_LAYERS_HIGH_MOTION"},{no:6,name:"H264_1080P_30FPS_3_LAYERS_HIGH_MOTION"},{no:7,name:"H264_540P_25FPS_2_LAYERS_HIGH_MOTION"},{no:8,name:"H264_720P_30FPS_1_LAYER_HIGH_MOTION"},{no:9,name:"H264_1080P_30FPS_1_LAYER_HIGH_MOTION"}]),nD=eh.makeMessageType("livekit.IngressAudioOptions",()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"source",kind:"enum",T:eh.getEnumType(eD)},{no:3,name:"preset",kind:"enum",T:eh.getEnumType(nR),oneof:"encoding_options"},{no:4,name:"options",kind:"message",T:nU,oneof:"encoding_options"}]),nF=eh.makeMessageType("livekit.IngressVideoOptions",()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"source",kind:"enum",T:eh.getEnumType(eD)},{no:3,name:"preset",kind:"enum",T:eh.getEnumType(nP),oneof:"encoding_options"},{no:4,name:"options",kind:"message",T:nM,oneof:"encoding_options"}]),nU=eh.makeMessageType("livekit.IngressAudioEncodingOptions",()=>[{no:1,name:"audio_codec",kind:"enum",T:eh.getEnumType(ev)},{no:2,name:"bitrate",kind:"scalar",T:13},{no:3,name:"disable_dtx",kind:"scalar",T:8},{no:4,name:"channels",kind:"scalar",T:13}]),nM=eh.makeMessageType("livekit.IngressVideoEncodingOptions",()=>[{no:1,name:"video_codec",kind:"enum",T:eh.getEnumType(eO)},{no:2,name:"frame_rate",kind:"scalar",T:1},{no:3,name:"layers",kind:"message",T:eY,repeated:!0}]),nL=(()=>[{no:1,name:"ingress_id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"stream_key",kind:"scalar",T:9},{no:4,name:"url",kind:"scalar",T:9},{no:5,name:"input_type",kind:"enum",T:eh.getEnumType(nA)},{no:13,name:"bypass_transcoding",kind:"scalar",T:8},{no:15,name:"enable_transcoding",kind:"scalar",T:8,opt:!0},{no:6,name:"audio",kind:"message",T:nD},{no:7,name:"video",kind:"message",T:nF},{no:8,name:"room_name",kind:"scalar",T:9},{no:9,name:"participant_identity",kind:"scalar",T:9},{no:10,name:"participant_name",kind:"scalar",T:9},{no:14,name:"participant_metadata",kind:"scalar",T:9},{no:11,name:"reusable",kind:"scalar",T:8},{no:12,name:"state",kind:"message",T:nL},{no:16,name:"enabled",kind:"scalar",T:8,opt:!0}],eh.makeMessageType("livekit.IngressState",()=>[{no:1,name:"status",kind:"enum",T:eh.getEnumType(nC)},{no:2,name:"error",kind:"scalar",T:9},{no:3,name:"video",kind:"message",T:nH},{no:4,name:"audio",kind:"message",T:nB},{no:5,name:"room_id",kind:"scalar",T:9},{no:7,name:"started_at",kind:"scalar",T:3},{no:8,name:"ended_at",kind:"scalar",T:3},{no:10,name:"updated_at",kind:"scalar",T:3},{no:9,name:"resource_id",kind:"scalar",T:9},{no:6,name:"tracks",kind:"message",T:eV,repeated:!0}])),nC=eh.makeEnum("livekit.IngressState.Status",[{no:0,name:"ENDPOINT_INACTIVE"},{no:1,name:"ENDPOINT_BUFFERING"},{no:2,name:"ENDPOINT_PUBLISHING"},{no:3,name:"ENDPOINT_ERROR"},{no:4,name:"ENDPOINT_COMPLETE"}]),nH=eh.makeMessageType("livekit.InputVideoState",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"average_bitrate",kind:"scalar",T:13},{no:3,name:"width",kind:"scalar",T:13},{no:4,name:"height",kind:"scalar",T:13},{no:5,name:"framerate",kind:"scalar",T:1}]),nB=eh.makeMessageType("livekit.InputAudioState",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"average_bitrate",kind:"scalar",T:13},{no:3,name:"channels",kind:"scalar",T:13},{no:4,name:"sample_rate",kind:"scalar",T:13}]),nJ=eh.makeMessageType("livekit.RoomEgress",()=>[{no:1,name:"room",kind:"message",T:ni},{no:3,name:"participant",kind:"message",T:nv},{no:2,name:"tracks",kind:"message",T:nO}]),n$=eh.makeMessageType("livekit.RoomConfiguration",()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"empty_timeout",kind:"scalar",T:13},{no:3,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:11,name:"metadata",kind:"scalar",T:9},{no:5,name:"egress",kind:"message",T:nJ},{no:7,name:"min_playout_delay",kind:"scalar",T:13},{no:8,name:"max_playout_delay",kind:"scalar",T:13},{no:9,name:"sync_streams",kind:"scalar",T:8},{no:10,name:"agents",kind:"message",T:e9,repeated:!0}]),nx=eh.makeEnum("livekit.SIPTransport",[{no:0,name:"SIP_TRANSPORT_AUTO"},{no:1,name:"SIP_TRANSPORT_UDP"},{no:2,name:"SIP_TRANSPORT_TCP"},{no:3,name:"SIP_TRANSPORT_TLS"}]),nj=eh.makeEnum("livekit.SIPHeaderOptions",[{no:0,name:"SIP_NO_HEADERS"},{no:1,name:"SIP_X_HEADERS"},{no:2,name:"SIP_ALL_HEADERS"}]),nG=eh.makeEnum("livekit.SIPMediaEncryption",[{no:0,name:"SIP_MEDIA_ENCRYPT_DISABLE"},{no:1,name:"SIP_MEDIA_ENCRYPT_ALLOW"},{no:2,name:"SIP_MEDIA_ENCRYPT_REQUIRE"}]),nK=eh.makeEnum("livekit.SIPTrunkInfo.TrunkKind",[{no:0,name:"TRUNK_LEGACY"},{no:1,name:"TRUNK_INBOUND"},{no:2,name:"TRUNK_OUTBOUND"}]),nV=(()=>[{no:1,name:"sip_trunk_id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"metadata",kind:"scalar",T:9},{no:4,name:"numbers",kind:"scalar",T:9,repeated:!0},{no:5,name:"allowed_addresses",kind:"scalar",T:9,repeated:!0},{no:6,name:"allowed_numbers",kind:"scalar",T:9,repeated:!0},{no:7,name:"auth_username",kind:"scalar",T:9},{no:8,name:"auth_password",kind:"scalar",T:9},{no:9,name:"headers",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:10,name:"headers_to_attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:14,name:"attributes_to_headers",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:15,name:"include_headers",kind:"enum",T:eh.getEnumType(nj)},{no:11,name:"ringing_timeout",kind:"message",T:ey},{no:12,name:"max_call_duration",kind:"message",T:ey},{no:13,name:"krisp_enabled",kind:"scalar",T:8},{no:16,name:"media_encryption",kind:"enum",T:eh.getEnumType(nG)}],eh.makeMessageType("livekit.SIPDispatchRuleDirect",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"pin",kind:"scalar",T:9}])),nW=eh.makeMessageType("livekit.SIPDispatchRuleIndividual",()=>[{no:1,name:"room_prefix",kind:"scalar",T:9},{no:2,name:"pin",kind:"scalar",T:9}]),nY=eh.makeMessageType("livekit.SIPDispatchRuleCallee",()=>[{no:1,name:"room_prefix",kind:"scalar",T:9},{no:2,name:"pin",kind:"scalar",T:9},{no:3,name:"randomize",kind:"scalar",T:8}]),nq=eh.makeMessageType("livekit.SIPDispatchRule",()=>[{no:1,name:"dispatch_rule_direct",kind:"message",T:nV,oneof:"rule"},{no:2,name:"dispatch_rule_individual",kind:"message",T:nW,oneof:"rule"},{no:3,name:"dispatch_rule_callee",kind:"message",T:nY,oneof:"rule"}]);var nX,nz,nZ,nQ,n0,n1=t(4573);let n2=e=>n1.Buffer.from(e).toString("base64url");var n3=t(7598),n9=t(7975);class n4 extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,n){super(e,n),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class n6 extends n4{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class n5 extends n4{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class n8 extends n4{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class n7 extends n4{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",n){super(e,n)}}let te=n3.webcrypto,tn=e=>n9.types.isCryptoKey(e),tt=e=>n9.types.isKeyObject(e);function ta(e,n,...t){if((t=t.filter(Boolean)).length>2){let n=t.pop();e+=`one of type ${t.join(", ")}, or ${n}.`}else 2===t.length?e+=`one of type ${t[0]} or ${t[1]}.`:e+=`of type ${t[0]}.`;return null==n?e+=` Received ${n}`:"function"==typeof n&&n.name?e+=` Received function ${n.name}`:"object"==typeof n&&null!=n&&n.constructor?.name&&(e+=` Received an instance of ${n.constructor.name}`),e}let tr=(e,...n)=>ta("Key must be ",e,...n);function ti(e,n,...t){return ta(`Key for the ${e} algorithm must be `,n,...t)}let ts=e=>tt(e)||tn(e),to=["KeyObject"];function tm(e){if(!("object"==typeof e&&null!==e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let n=e;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function tl(e){return tm(e)&&"string"==typeof e.kty}(globalThis.CryptoKey||te?.CryptoKey)&&to.push("CryptoKey"),new WeakMap;let td=e=>{switch(e){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new n6("Unsupported key curve for this operation")}},tc=(e,n)=>{let t;if(tn(e))t=n3.KeyObject.from(e);else if(tt(e))t=e;else if(tl(e))return e.crv;else throw TypeError(tr(e,...to));if("secret"===t.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(t.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${t.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${t.asymmetricKeyType.slice(1)}`;case"ec":{let e=t.asymmetricKeyDetails.namedCurve;if(n)return e;return td(e)}default:throw TypeError("Invalid asymmetric key type for this operation")}},tu=(e,n)=>{let t;try{t=e instanceof n3.KeyObject?e.asymmetricKeyDetails?.modulusLength:Buffer.from(e.n,"base64url").byteLength<<3}catch{}if("number"!=typeof t||t<2048)throw TypeError(`${n} requires key modulusLength to be 2048 bits or larger`)},tp=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);function tf(e,n="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${n} must be ${e}`)}function tT(e,n){return e.name===n}function tk(e){return parseInt(e.name.slice(4),10)}let th=(0,n9.promisify)(n3.sign),tg=async(e,n,t)=>{let a=function(e,n,t){if(n instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError(tr(n,...to));return(0,n3.createSecretKey)(n)}if(n instanceof n3.KeyObject)return n;if(tn(n))return function(e,n,...t){switch(n){case"HS256":case"HS384":case"HS512":{if(!tT(e.algorithm,"HMAC"))throw tf("HMAC");let t=parseInt(n.slice(2),10);if(tk(e.algorithm.hash)!==t)throw tf(`SHA-${t}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!tT(e.algorithm,"RSASSA-PKCS1-v1_5"))throw tf("RSASSA-PKCS1-v1_5");let t=parseInt(n.slice(2),10);if(tk(e.algorithm.hash)!==t)throw tf(`SHA-${t}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!tT(e.algorithm,"RSA-PSS"))throw tf("RSA-PSS");let t=parseInt(n.slice(2),10);if(tk(e.algorithm.hash)!==t)throw tf(`SHA-${t}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw tf("Ed25519 or Ed448");break;case"Ed25519":if(!tT(e.algorithm,"Ed25519"))throw tf("Ed25519");break;case"ES256":case"ES384":case"ES512":{if(!tT(e.algorithm,"ECDSA"))throw tf("ECDSA");let t=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(n);if(e.algorithm.namedCurve!==t)throw tf(t,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}(function(e,n){if(n.length&&!n.some(n=>e.usages.includes(n))){let e="CryptoKey does not support this operation, its usages must include ";if(n.length>2){let t=n.pop();e+=`one of ${n.join(", ")}, or ${t}.`}else 2===n.length?e+=`one of ${n[0]} or ${n[1]}.`:e+=`${n[0]}.`;throw TypeError(e)}})(e,t)}(n,e,t),n3.KeyObject.from(n);if(tl(n))return e.startsWith("HS")?(0,n3.createSecretKey)(Buffer.from(n.k,"base64url")):n;throw TypeError(tr(n,...to,"Uint8Array","JSON Web Key"))}(e,n,"sign");if(e.startsWith("HS")){let n=n3.createHmac(function(e){switch(e){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new n6(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}(e),a);return n.update(t),n.digest()}return th(function(e){switch(e){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"Ed25519":case"EdDSA":return;default:throw new n6(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}(e),t,function(e,n){let t,a,r,i;if(n instanceof n3.KeyObject)t=n.asymmetricKeyType,a=n.asymmetricKeyDetails;else switch(r=!0,n.kty){case"RSA":t="rsa";break;case"EC":t="ec";break;case"OKP":if("Ed25519"===n.crv){t="ed25519";break}if("Ed448"===n.crv){t="ed448";break}throw TypeError("Invalid key for this operation, its crv must be Ed25519 or Ed448");default:throw TypeError("Invalid key for this operation, its kty must be RSA, OKP, or EC")}switch(e){case"Ed25519":if("ed25519"!==t)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519");break;case"EdDSA":if(!["ed25519","ed448"].includes(t))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");break;case"RS256":case"RS384":case"RS512":if("rsa"!==t)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");tu(n,e);break;case"PS256":case"PS384":case"PS512":if("rsa-pss"===t){let{hashAlgorithm:n,mgf1HashAlgorithm:t,saltLength:r}=a,i=parseInt(e.slice(-3),10);if(void 0!==n&&(n!==`sha${i}`||t!==n))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}`);if(void 0!==r&&r>i>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}`)}else if("rsa"!==t)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");tu(n,e),i={padding:n3.constants.RSA_PKCS1_PSS_PADDING,saltLength:n3.constants.RSA_PSS_SALTLEN_DIGEST};break;case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==t)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let a=tc(n),r=tp.get(e);if(a!==r)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${r}, got ${a}`);i={dsaEncoding:"ieee-p1363"};break}default:throw new n6(`alg ${e} is not supported either by JOSE or your javascript runtime`)}return r?{format:"jwk",key:n,...i}:i?{...i,key:n}:n}(e,a))},ty=(...e)=>{let n;let t=e.filter(Boolean);if(0===t.length||1===t.length)return!0;for(let e of t){let t=Object.keys(e);if(!n||0===n.size){n=new Set(t);continue}for(let e of t){if(n.has(e))return!1;n.add(e)}}return!0},t_=new TextEncoder,tE=new TextDecoder,tb=e=>e?.[Symbol.toStringTag],tS=(e,n,t)=>{if(void 0!==n.use&&"sig"!==n.use)throw TypeError("Invalid key for this operation, when present its use must be sig");if(void 0!==n.key_ops&&n.key_ops.includes?.(t)!==!0)throw TypeError(`Invalid key for this operation, when present its key_ops must include ${t}`);if(void 0!==n.alg&&n.alg!==e)throw TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0},tI=(e,n,t,a)=>{if(!(n instanceof Uint8Array)){if(a&&tl(n)){if(function(e){return tl(e)&&"oct"===e.kty&&"string"==typeof e.k}(n)&&tS(e,n,t))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!ts(n))throw TypeError(ti(e,n,...to,"Uint8Array",a?"JSON Web Key":null));if("secret"!==n.type)throw TypeError(`${tb(n)} instances for symmetric algorithms must be of type "secret"`)}},tN=(e,n,t,a)=>{if(a&&tl(n))switch(t){case"sign":if(function(e){return"oct"!==e.kty&&"string"==typeof e.d}(n)&&tS(e,n,t))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(function(e){return"oct"!==e.kty&&void 0===e.d}(n)&&tS(e,n,t))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!ts(n))throw TypeError(ti(e,n,...to,a?"JSON Web Key":null));if("secret"===n.type)throw TypeError(`${tb(n)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===t&&"public"===n.type)throw TypeError(`${tb(n)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===t&&"public"===n.type)throw TypeError(`${tb(n)} instances for asymmetric algorithm decryption must be of type "private"`);if(n.algorithm&&"verify"===t&&"private"===n.type)throw TypeError(`${tb(n)} instances for asymmetric algorithm verifying must be of type "public"`);if(n.algorithm&&"encrypt"===t&&"private"===n.type)throw TypeError(`${tb(n)} instances for asymmetric algorithm encryption must be of type "public"`)};function tw(e,n,t,a){n.startsWith("HS")||"dir"===n||n.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(n)?tI(n,t,a,e):tN(n,t,a,e)}tw.bind(void 0,!1);let tv=tw.bind(void 0,!0),tO=function(e,n,t,a,r){let i;if(void 0!==r.crit&&a?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!a||void 0===a.crit)return new Set;if(!Array.isArray(a.crit)||0===a.crit.length||a.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let s of(i=void 0!==t?new Map([...Object.entries(t),...n.entries()]):n,a.crit)){if(!i.has(s))throw new n6(`Extension Header Parameter "${s}" is not recognized`);if(void 0===r[s])throw new e(`Extension Header Parameter "${s}" is missing`);if(i.get(s)&&void 0===a[s])throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(a.crit)};class tA{_payload;_protectedHeader;_unprotectedHeader;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,n){let t;if(!this._protectedHeader&&!this._unprotectedHeader)throw new n5("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!ty(this._protectedHeader,this._unprotectedHeader))throw new n5("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let a={...this._protectedHeader,...this._unprotectedHeader},r=tO(n5,new Map([["b64",!0]]),n?.crit,this._protectedHeader,a),i=!0;if(r.has("b64")&&"boolean"!=typeof(i=this._protectedHeader.b64))throw new n5('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:s}=a;if("string"!=typeof s||!s)throw new n5('JWS "alg" (Algorithm) Header Parameter missing or invalid');tv(s,e,"sign");let o=this._payload;i&&(o=t_.encode(n2(o)));let m=function(...e){let n=new Uint8Array(e.reduce((e,{length:n})=>e+n,0)),t=0;for(let a of e)n.set(a,t),t+=a.length;return n}(t=this._protectedHeader?t_.encode(n2(JSON.stringify(this._protectedHeader))):t_.encode(""),t_.encode("."),o),l={signature:n2(await tg(s,e,m)),payload:""};return i&&(l.payload=tE.decode(o)),this._unprotectedHeader&&(l.header=this._unprotectedHeader),this._protectedHeader&&(l.protected=tE.decode(t)),l}}class tR{_flattened;constructor(e){this._flattened=new tA(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,n){let t=await this._flattened.sign(e,n);if(void 0===t.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${t.protected}.${t.payload}.${t.signature}`}}let tP=e=>Math.floor(e.getTime()/1e3),tD=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,tF=e=>{let n;let t=tD.exec(e);if(!t||t[4]&&t[1])throw TypeError("Invalid time period format");let a=parseFloat(t[2]);switch(t[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(a);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(60*a);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(3600*a);break;case"day":case"days":case"d":n=Math.round(86400*a);break;case"week":case"weeks":case"w":n=Math.round(604800*a);break;default:n=Math.round(0x1e187e0*a)}return"-"===t[1]||"ago"===t[4]?-n:n};function tU(e,n){if(!Number.isFinite(n))throw TypeError(`Invalid ${e} input`);return n}class tM{_payload;constructor(e={}){if(!tm(e))throw TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:tU("setNotBefore",e)}:e instanceof Date?this._payload={...this._payload,nbf:tU("setNotBefore",tP(e))}:this._payload={...this._payload,nbf:tP(new Date)+tF(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:tU("setExpirationTime",e)}:e instanceof Date?this._payload={...this._payload,exp:tU("setExpirationTime",tP(e))}:this._payload={...this._payload,exp:tP(new Date)+tF(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:tP(new Date)}:e instanceof Date?this._payload={...this._payload,iat:tU("setIssuedAt",tP(e))}:"string"==typeof e?this._payload={...this._payload,iat:tU("setIssuedAt",tP(new Date)+tF(e))}:this._payload={...this._payload,iat:tU("setIssuedAt",e)},this}}class tL extends tM{_protectedHeader;setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,n){let t=new tR(t_.encode(JSON.stringify(this._payload)));if(t.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new n8("JWTs MUST NOT use unencoded payload");return t.sign(e,n)}}function tC(e){switch(e){case eD.CAMERA:return"camera";case eD.MICROPHONE:return"microphone";case eD.SCREEN_SHARE:return"screen_share";case eD.SCREEN_SHARE_AUDIO:return"screen_share_audio";default:throw TypeError(`Cannot convert TrackSource ${e} to string`)}}class tH{constructor(e,n,t){if(e||(e=process.env.LIVEKIT_API_KEY),n||(n=process.env.LIVEKIT_API_SECRET),e&&n)"undefined"!=typeof document&&console.error("You should not include your API secret in your web client bundle.\n\nYour web client should request a token from your backend server which should then use the API secret to generate a token. See https://docs.livekit.io/client/connect/");else throw Error("api-key and api-secret must be set");this.apiKey=e,this.apiSecret=n,this.grants={},this.identity=null==t?void 0:t.identity,this.ttl=(null==t?void 0:t.ttl)||"6h","number"==typeof this.ttl&&(this.ttl=`${this.ttl}s`),(null==t?void 0:t.metadata)&&(this.metadata=t.metadata),(null==t?void 0:t.attributes)&&(this.attributes=t.attributes),(null==t?void 0:t.name)&&(this.name=t.name)}addGrant(e){this.grants.video={...this.grants.video??{},...e}}addInferenceGrant(e){this.grants.inference={...this.grants.inference??{},...e}}addSIPGrant(e){this.grants.sip={...this.grants.sip??{},...e}}addObservabilityGrant(e){this.grants.observability={...this.grants.observability??{},...e}}get name(){return this.grants.name}set name(e){this.grants.name=e}get metadata(){return this.grants.metadata}set metadata(e){this.grants.metadata=e}get attributes(){return this.grants.attributes}set attributes(e){this.grants.attributes=e}get kind(){return this.grants.kind}set kind(e){this.grants.kind=e}get sha256(){return this.grants.sha256}set sha256(e){this.grants.sha256=e}get roomPreset(){return this.grants.roomPreset}set roomPreset(e){this.grants.roomPreset=e}get roomConfig(){return this.grants.roomConfig}set roomConfig(e){this.grants.roomConfig=e}async toJwt(){var e;let n=new TextEncoder().encode(this.apiSecret),t=new tL(function(e){var n;let t={...e};return Array.isArray(null==(n=t.video)?void 0:n.canPublishSources)&&(t.video.canPublishSources=t.video.canPublishSources.map(tC)),t}(this.grants)).setProtectedHeader({alg:"HS256"}).setIssuer(this.apiKey).setExpirationTime(this.ttl).setNotBefore(0);if(this.identity)t.setSubject(this.identity);else if(null==(e=this.grants.video)?void 0:e.roomJoin)throw Error("identity is required for join but not set");return t.sign(n)}}}};