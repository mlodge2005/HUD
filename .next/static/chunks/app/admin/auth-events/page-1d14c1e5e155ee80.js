(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[821],{5055:(e,t,s)=>{Promise.resolve().then(s.bind(s,2965))},2965:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var r=s(5155),l=s(2115);function n(){let[e,t]=(0,l.useState)([]),[s,n]=(0,l.useState)(null),[a,d]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{let e=!1;return fetch("/api/admin/auth-events?limit=50").then(e=>e.json()).then(s=>{if(!e){var r;t(s.events||[]),n(null!==(r=s.nextCursor)&&void 0!==r?r:null)}}).finally(()=>{e||d(!1)}),()=>{e=!0}},[]),a&&0===e.length)?(0,r.jsx)("p",{children:"Loading…"}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border-collapse border",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100",children:[(0,r.jsx)("th",{className:"border p-2 text-left",children:"Time"}),(0,r.jsx)("th",{className:"border p-2 text-left",children:"Event"}),(0,r.jsx)("th",{className:"border p-2 text-left",children:"User"}),(0,r.jsx)("th",{className:"border p-2 text-left",children:"IP"}),(0,r.jsx)("th",{className:"border p-2 text-left",children:"User-Agent"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>{var t,s,l;return(0,r.jsxs)("tr",{className:"border",children:[(0,r.jsx)("td",{className:"border p-2 text-sm",children:new Date(e.createdAt).toLocaleString()}),(0,r.jsx)("td",{className:"border p-2",children:(0,r.jsx)("span",{className:"login_success"===e.eventType?"text-green-600":"login_failed"===e.eventType?"text-red-600":"text-gray-600",children:e.eventType})}),(0,r.jsx)("td",{className:"border p-2",children:null!==(t=e.username)&&void 0!==t?t:"—"}),(0,r.jsx)("td",{className:"border p-2 text-sm",children:null!==(s=e.ip)&&void 0!==s?s:"—"}),(0,r.jsx)("td",{className:"border p-2 text-sm max-w-xs truncate",children:null!==(l=e.userAgent)&&void 0!==l?l:"—"})]},e.id)})})]})}),s&&(0,r.jsx)("button",{type:"button",onClick:function(){s&&(d(!0),fetch("/api/admin/auth-events?limit=50&cursor="+encodeURIComponent(s)).then(e=>e.json()).then(e=>{var s;t(t=>[...t,...e.events||[]]),n(null!==(s=e.nextCursor)&&void 0!==s?s:null)}).finally(()=>d(!1)))},disabled:a,className:"mt-4 px-4 py-2 border rounded hover:bg-gray-100 disabled:opacity-50",children:"Load more"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(5055)),_N_E=e.O()}]);