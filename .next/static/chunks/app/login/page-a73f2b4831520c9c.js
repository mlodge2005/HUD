(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{1346:(e,s,r)=>{Promise.resolve().then(r.bind(r,7527))},6046:(e,s,r)=>{"use strict";var t=r(6658);r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})},7527:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l});var t=r(5155),a=r(2115),n=r(6046);function u(){let e=(0,n.useRouter)(),s=(0,n.useSearchParams)().get("from")||"/hud",[r,u]=(0,a.useState)(""),[l,i]=(0,a.useState)(""),[o,d]=(0,a.useState)(""),[c,m]=(0,a.useState)(!1);async function h(t){t.preventDefault(),d(""),m(!0);try{var a;let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:l})}),n=await t.json().catch(()=>({}));if(!t.ok){d(n.error||"Login failed"),m(!1);return}if(null===(a=n.user)||void 0===a?void 0:a.mustChangePassword){e.push("/change-password?from="+encodeURIComponent(s));return}e.push(s),e.refresh()}catch(e){d("Network error")}finally{m(!1)}}return(0,t.jsx)("main",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100",children:(0,t.jsxs)("div",{className:"w-full max-w-sm bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Log in"}),(0,t.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[o&&(0,t.jsx)("p",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:o}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,t.jsx)("input",{type:"text",value:r,onChange:e=>u(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2",required:!0,autoComplete:"username"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,t.jsx)("input",{type:"password",value:l,onChange:e=>i(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2",required:!0,autoComplete:"current-password"})]}),(0,t.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 disabled:opacity-50",children:c?"Signing in…":"Sign in"})]})]})})}function l(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("main",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("p",{children:"Loading…"})}),children:(0,t.jsx)(u,{})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[441,517,358],()=>s(1346)),_N_E=e.O()}]);